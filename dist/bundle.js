(()=>{"use strict";var e={148:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkRowsAndColumns=t.checkGrid=void 0;var r=n(12);t.checkGrid=function(){var e;return null==(0,r.getCurrentGrid)()?(e="something went wrong with fetching the grid :S",alert(e),e):!0!==l()?(e="the grid is not fully filled :S",alert(e),e):!0!==o()&&!0!==u()?(e="the grid is incorrect :S",alert(e),e):(e="the grid is correct :D. Well done!",alert(e),e)};var l=function(){for(var e=(0,r.getCurrentGrid)(),t=0;t<9;t++)for(var n=0;n<9;n++)if(null==e[t][n])return!1;return!0},o=function(){for(var e=(0,r.getCurrentGrid)(),t=new Array(9).fill(0),n=new Array(9).fill(0),l=0;l<9;l++){t.fill(0),n.fill(0);for(var o=0;o<9;o++){var u=e[l][o],i=e[o][l];if(t[u-1]++,n[i-1]++,1!=t[u-1])return!1;if(1!=n[i-1])return!1}}return!0};t.checkRowsAndColumns=o;var u=function(){return 1==i(0,2,0,2)&&1==i(0,2,3,5)&&1==i(0,2,6,8)&&1==i(3,5,0,2)&&1==i(3,5,6,8)&&1==i(3,5,0,2)&&1==i(5,8,0,2)&&1==i(5,8,3,5)&&1==i(5,8,5,8)},i=function(e,t,n,l){for(var o=(0,r.getCurrentGrid)(),u=new Array(9).fill(0),i=e;i<=t;i++)for(var c=n;c<=l;c++){var a=o[i][c];if(u[a-1]++,u[a-1]>1)return!1}return!0}},12:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentGrid=void 0,t.getCurrentGrid=function(){for(var e=[],t=0;t<9;t++)e[t]=new Array(9).fill(null);var n=document.querySelectorAll(".cell");if(null==n)return null;for(t=0;t<=8;t++)for(var r=0;r<=8;r++){var l=n[9*t+r];if(!(l instanceof HTMLElement))return null;if(!l)return null;var o=l.innerText;e[t][r]=Number(o)}return e}},483:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearBoard=void 0;var r=n(945);t.clearBoard=function(){!function(){var e=document.getElementById("grid");if(null!==e)for(;e.lastChild;)e.removeChild(e.lastChild)}();var e=document.createElement("div");null!==e&&(e.id="grid",document.body.append(e),(0,r.createBoard)(function(){for(var e=[],t=0;t<9;t++)e[t]=new Array(9).fill(null);return e}()))}},945:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBoard=void 0;var r=n(295);t.createBoard=function(e){console.log("called 'createBoard' function from:"),e.forEach((function(e){console.log("".concat(e,"\n"))}));var t=document.getElementById("grid");null!==t&&e.forEach((function(e,n){var r=document.createElement("div");null!==r&&(r.classList.add("row"),r.setAttribute("row","".concat(n)),2!=n&&5!=n||r.classList.add("underline"),t.append(r),e.forEach((function(e,t){var o=document.createElement("div");null!==o&&(o.setAttribute("row","".concat(n)),o.setAttribute("column","".concat(t)),o.classList.add("cell"),2!=t&&5!=t||o.classList.add("rightline"),null===e?(o.setAttribute("type","button"),o.addEventListener("click",l)):o.innerText=e.toString(),r.append(o))})))}))};var l=function(e){var t=e.target;if(t instanceof HTMLElement){var n=t.getAttribute("row"),l=t.getAttribute("column"),o=document.querySelector('[row="'.concat(n,'"][column="').concat(l,'"]'));if(o instanceof HTMLElement){var u;do{var i=prompt("Enter a number between 1 and 9:");if(null===i)return;u=Number.parseInt(i)}while(isNaN(Number(u)));if(!isNaN(Number(u))&&null!==o){var c;c=""===o.innerHTML?0:Number.parseInt(o.innerHTML),o.innerText=u.toString(),r.undoStack.push([Number.parseInt(n),Number.parseInt(l),c])}}}}},369:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.solveGrid=void 0;var r=n(12),l=n(188);t.solveGrid=function(){var e=(0,r.getCurrentGrid)();console.log(e),(0,l.possibles)(e)}},295:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.undoStep=t.undoStack=void 0;var l=new(function(e){function t(t){void 0===t&&(t=1/0);var n=e.call(this)||this;return n.capacity=t,n}return r(t,e),t.prototype.push=function(e){if(this.isFull())throw Error("Stack has reached max capacity, you cannot add more items");this.storage.push(e)},t.prototype.pop=function(){return this.storage.pop()},t.prototype.peek=function(){return this.storage[this.size()-1]},t.prototype.isFull=function(){return this.capacity===this.size()},t}(function(){function e(){this.storage=[]}return e.prototype.size=function(){return this.storage.length},e}()));t.undoStack=l,t.undoStep=function(){if(null===l.peek()||void 0===l.peek()){var e="undoStack is null or undefined";return alert(e),e}if(0===l.size())return e="the undoStack is not yet built",alert(e),e;var t=l.pop();if(3!==t.length)return e="something went wrong with fetching an undoStack-element",alert(e),e;var n=document.querySelector('[row="'.concat(t[0],'"][column="').concat(t[1],'"]'));return console.log("undid row ".concat(t[0]+1," column ").concat(t[1]+1," from ").concat(n.innerHTML," to ").concat(t[2])),0===t[2]?n.innerHTML="":n.innerHTML=t[2].toString(),"good work mate"}},745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.testGridFilledWrong=t.testGridFilledRight=t.testGrid=void 0,t.testGrid=[[null,5,null,null,3,null,null,null,null],[null,6,9,null,null,null,5,null,1],[null,null,7,9,null,null,null,4,8],[7,9,null,1,null,5,6,8,2],[4,2,null,3,8,9,7,null,5],[1,8,null,null,6,null,null,null,null],[null,null,8,null,null,null,4,null,null],[null,7,null,5,null,4,null,null,null],[null,null,null,null,7,3,null,5,6]],t.testGridFilledRight=[["8","5","4","7","3","1","2","6","9"],["3","6","9","4","2","8","5","7","1"],["2","1","7","9","5","6","3","4","8"],["7","9","3","1","4","5","6","8","2"],["4","2","6","3","8","9","7","1","5"],["1","8","5","2","6","7","9","3","4"],["5","3","8","6","1","2","4","9","7"],["6","7","1","5","9","4","8","2","3"],["9","4","2","8","7","3","1","5","6"]],t.testGridFilledWrong=[["5","8","4","7","3","1","2","6","9"],["3","6","9","4","2","8","5","7","1"],["2","1","7","9","5","6","3","4","8"],["7","9","3","1","4","5","6","8","2"],["4","2","6","3","8","9","7","1","5"],["1","8","5","2","6","7","9","3","4"],["5","3","8","6","1","2","4","9","7"],["6","7","1","5","9","4","8","2","3"],["9","4","2","8","7","3","1","5","6"]]},188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.possibles=void 0;var n=function(){function e(e,t,n){this.row=e,this.column=t,this.box=3*Math.floor(this.row/3)+Math.floor(this.column/3),this.possibleValues=n}return e.prototype.getRow=function(){return this.row},e.prototype.getColumn=function(){return this.column},e.prototype.getBox=function(){return this.box},e.prototype.getPossibleValues=function(){return this.possibleValues},e}();t.possibles=function(e){var t=r(e);console.log(t)};var r=function(e){console.log("getAllNumbers got called");for(var t=[],r=0;r<=8;r++)for(var l=0;l<=8;l++)if(0===e[r][l]){var o=new n(r,l,[1,2,3,4,5,6,7,8,9]);t.push(o)}return t}}},t={};function n(r){var l=t[r];if(void 0!==l)return l.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(()=>{var e=n(148),t=n(945),r=n(483),l=n(295),o=n(745),u=n(369),i=document.getElementById("clear");null!==i?i.addEventListener("click",r.clearBoard):alert("we've got a problem with the check button :/");var c=document.getElementById("check");null!==c?c.addEventListener("click",e.checkGrid):alert("we've got a problem with the check button"),window.addEventListener("keydown",(function(e){"z"===e.key&&!0===e.ctrlKey&&(e.preventDefault(),(0,l.undoStep)())}));var a=document.getElementById("undo");null!==a?a.addEventListener("click",l.undoStep):alert("we've got a problem with the undo button");var d=document.getElementById("solve");null!==d||void 0!==d?d.addEventListener("click",u.solveGrid):alert("we've got a problem with the undo button"),(0,t.createBoard)(o.testGrid)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUksR0FBRzdCLFdBQ3RCLGdCQUNULEMsNkhDdENFLEVBQUE4QixTQXpDeUIsQ0FDekIsQ0FBQyxLQUFNLEVBQUcsS0FBTSxLQUFNLEVBQUcsS0FBTSxLQUFNLEtBQU0sTUFDM0MsQ0FBQyxLQUFNLEVBQUcsRUFBRyxLQUFNLEtBQU0sS0FBTSxFQUFHLEtBQU0sR0FDeEMsQ0FBQyxLQUFNLEtBQU0sRUFBRyxFQUFHLEtBQU0sS0FBTSxLQUFNLEVBQUcsR0FFeEMsQ0FBQyxFQUFHLEVBQUcsS0FBTSxFQUFHLEtBQU0sRUFBRyxFQUFHLEVBQUcsR0FDL0IsQ0FBQyxFQUFHLEVBQUcsS0FBTSxFQUFHLEVBQUcsRUFBRyxFQUFHLEtBQU0sR0FDL0IsQ0FBQyxFQUFHLEVBQUcsS0FBTSxLQUFNLEVBQUcsS0FBTSxLQUFNLEtBQU0sTUFFeEMsQ0FBQyxLQUFNLEtBQU0sRUFBRyxLQUFNLEtBQU0sS0FBTSxFQUFHLEtBQU0sTUFDM0MsQ0FBQyxLQUFNLEVBQUcsS0FBTSxFQUFHLEtBQU0sRUFBRyxLQUFNLEtBQU0sTUFDeEMsQ0FBQyxLQUFNLEtBQU0sS0FBTSxLQUFNLEVBQUcsRUFBRyxLQUFNLEVBQUcsSUErQnhDLEVBQUFDLG9CQTdCb0MsQ0FDcEMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDekMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDekMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FFekMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDekMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDekMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FFekMsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDekMsQ0FBQyxJQUFL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QUFFQyxNQUE2QixJQUFkRCxFQUFFRSxVQUNuQkYsRUFBRUcsa0JBRUYsSUFBQWxDLFlBRVIsSUFFQSxJQUFNbUMsRUFBYTlGLFNBQVNRLGVBQWUsUUFDekIsT0FBZnNGLEVBQ0NBLEVBQVcvRCxpQkFBaUIsUUFBUyxFQUFBNEIsVUFDbENqRixNQUFNLDRDQUViLElBQU1xSCxFQUFjL0YsU0FBU1EsZUFBZSxTQUN6QixPQUFoQnVGLFFBQXdDbkMsSUFBaEJtQyxFQUN2QkEsRUFBWWhFLGlCQUFpQixRQUFTLEVBQUFnQixXQUNuQ3JFLE1BQU0sNkNBT2IsSUFBQXNDLGFBQVlnRixFQUFLakMsUyIsInNvdXJjZXMiOlsid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvQ2hlY2tpbmdHcmlkL2NoZWNraW5nR3JpZC50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL0dldHRlci9nZXRHcmlkLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvTWFuYWdpbmdHcmlkL2NsZWFyLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvTWFuYWdpbmdHcmlkL2NyZWF0ZS50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL01hbmFnaW5nR3JpZC9zb2x2ZS50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL01hbmFnaW5nR3JpZC91bmRvLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvUmVwb3NpdG9yeS9zdWRva3VUZXN0R3JpZC50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL3NvbHZlR3JpZC9wb3NzaWJsZU51bWJlcnNGb3JDZWxsLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDdXJyZW50R3JpZCB9IGZyb20gXCIuLi9HZXR0ZXIvZ2V0R3JpZFwiO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWNoZWNraW5nIHRoZSBHcmlkLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gZnVuY3Rpb25zIGZvciB0aGUgY2hlY2sgQnV0dG9uXG5cbi8qKlxuICogdGhlIG1haW4gY2hlY2tpbmcgZnVuY3Rpb24gdGhhdCB3aWxsIHVzZSBhbGwgb3RoZXIgZnVuY3Rpb24gaW4gdGhpcyBmaWxlIChhbmQgZ2V0dGluZyB0aGUgY3VycmVudCBncmlkKVxuICovXG5jb25zdCBjaGVja0dyaWQgPSAoKTogc3RyaW5nID0+IHtcbiAgICBsZXQgb3V0cHV0OiBzdHJpbmc7XG4gICAgY29uc3QgZyA9IGdldEN1cnJlbnRHcmlkKCk7XG4gICAgaWYgKGcgPT09IG51bGwgfHwgZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG91dHB1dCA9IGBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIGZldGNoaW5nIHRoZSBncmlkIDpTYDtcbiAgICAgICAgYWxlcnQob3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9ZWxzZSBpZiAoZ3JpZElzRnVsbCgpICE9PSB0cnVlKSB7XG4gICAgICAgIG91dHB1dCA9IGB0aGUgZ3JpZCBpcyBub3QgZnVsbHkgZmlsbGVkIDpTYDtcbiAgICAgICAgYWxlcnQob3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9ZWxzZSBpZiAoY2hlY2tSb3dzQW5kQ29sdW1ucygpICE9PSB0cnVlICYmIGNoZWNrQm94ZXMoKSAhPT0gdHJ1ZSkge1xuICAgICAgICBvdXRwdXQgPSBgdGhlIGdyaWQgaXMgaW5jb3JyZWN0IDpTYDtcbiAgICAgICAgYWxlcnQob3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9ZWxzZSB7XG4gICAgICAgIG91dHB1dCA9IGB0aGUgZ3JpZCBpcyBjb3JyZWN0IDpELiBXZWxsIGRvbmUhYDtcbiAgICAgICAgYWxlcnQob3V0cHV0ICk7XG4gICAgICAgIHJldHVybiBvdXRwdXRcbiAgICB9O1xufVxuXG5jb25zdCBncmlkSXNGdWxsID0gKCk6IGJvb2xlYW4gICA9PiB7XG4gICAgY29uc3QgZyA9IGdldEN1cnJlbnRHcmlkKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA5OyBqKyspIHtcbiAgICAgICAgICAgIGlmIChnW2ldW2pdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogYSBsb3Qgb2YgdHJvdWJsZSB3aXRoIHRoaXMgb25lLiBTZXQgdGhlIGNvdW50ZXIgQXJyYXkgdG8gYWxsIDBzIGFmdGVyIGVhY2ggcm93L2NvbHVtbjtcbiAqIC0tPiBjb3VudGluZyB0aGUgb2NjdXJyZW5jZSBvZiBudW1iZXJzIGluIGVhY2ggcm93L2NvbHVtbiwgY2hlY2tpbmcgaWYgaXQgaXMgZXF1YWwgdG8gMVxuICogQHJldHVybnMgYm9vbGVhbiB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWRva3UgZ3JpZCdzIHJvd3MgYW5kIGNvbHVtbnMgYXJlIGNvcnJlY3QgXG4gKiBhcyBwZXIgc3Vkb2t1IHJ1bGVzXG4gKi9cbmNvbnN0IGNoZWNrUm93c0FuZENvbHVtbnMgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgY29uc3QgY3VycmVudEdyaWQgPSBnZXRDdXJyZW50R3JpZCgpO1xuICAgIGxldCBjb3VudGVyUm93cyA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgIGxldCBjb3VudGVyQ29sdW1ucyA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICAgIGNvdW50ZXJSb3dzLmZpbGwoMCk7IFxuICAgICAgICBjb3VudGVyQ29sdW1ucy5maWxsKDApO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDk7IGorKykge1xuICAgICAgICAgICAgY29uc3QgbnVtUm93ID0gY3VycmVudEdyaWRbaV1bal07XG4gICAgICAgICAgICBjb25zdCBudW1Db2wgPSBjdXJyZW50R3JpZFtqXVtpXTtcbiAgICAgICAgICAgIGNvdW50ZXJSb3dzW251bVJvdy0xXSsrO1xuICAgICAgICAgICAgY291bnRlckNvbHVtbnNbbnVtQ29sLTFdKys7XG4gICAgICAgICAgICBpZihjb3VudGVyUm93c1tudW1Sb3ctMV0gIT0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYoY291bnRlckNvbHVtbnNbbnVtQ29sLTFdICE9IDEpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBldmVuIG9uZSBlbGVtIG9mIHRoZSBjb3VudEFycmF5cyBpcyBub3QgZXF1YWwgMSBmYWxzZSB3aWxsIGJlIHJldHVybmVkXG4gICAgICAgIC8vIGlmKGNvdW50ZXJSb3dzLnNvbWUoY291bnQgPT4gY291bnQgIT09IDkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIGVsc2UgaWYoY291bnRlckNvbHVtbnMuc29tZShjb3VudCA9PiBjb3VudCAhPT0gOSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gZG9lc24ndCB3b3JrIGZvciB0aGUgaW5jb3JyZWN0IG9yZGVyIG9mIG51bWJlcnMgaW4gdGhlIGdyaWRcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblxuLy8gYSBsaXR0bGUgdW5wbGVhc2FudCwgYnV0IGFzIG9mIHJpZ2h0IG5vdyBJIGRvbid0IGtub3cgd2hhdCBlbHNlIHRvIGRvIDovXG4vLyBATWUgc3VyZWx5IGl0IGNhbiBiZSBzb2x2ZWQgbW9yZSBlbGVnYW50bHkgYnV0IFwiZG9uJ3QgY2hhbmdlIGEgcnVubmluZyBzeXN0ZW1cIiA6RCBcbmNvbnN0IGNoZWNrQm94ZXMgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgLy8gZmlyc3Qgcm93IG9mIGJveGVzOlxuICAgIGlmIChib3hDaGVja0hlbHBlcigwLCAyLCAwLCAyKSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoMCwgMiwgMywgNSkgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDAsIDIsIDYsIDgpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICAvLyBzZWNvbmQgcm93IG9mIGJveGVzOlxuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDMsIDUsIDAsIDIpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcigzLCA1LCA2LCA4KSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoMywgNSwgMCwgMikgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIHRoaXJkIHJvdyBvZiBib3hlczpcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcig1LCA4LCAwLCAyKSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoNSwgOCwgMywgNSkgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDUsIDgsIDUsIDgpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIHJldHVybiB0cnVlXG59XG5cbmNvbnN0IGJveENoZWNrSGVscGVyID0gKGZyb21Sb3c6IG51bWJlciwgdG9Sb3c6IG51bWJlciwgZnJvbUNvbHVtbjogbnVtYmVyLCB0b0NvbHVtbjogbnVtYmVyKTogYm9vbGVhbiA9PiB7XG4gICAgY29uc3QgZyA9IGdldEN1cnJlbnRHcmlkKCk7XG4gICAgbGV0IGNvdW50ZXIgPSBuZXcgQXJyYXkoOSkuZmlsbCgwKTtcbiAgICAvLyBpZiAoZnJvbVJvdyA9PSBudWxsIHx8IGZyb21Sb3cgPT0gdW5kZWZpbmVkIHx8IHRvUm93ID09IG51bGwgfHwgdG9Sb3cgPT0gdW5kZWZpbmVkXG4gICAgLy8gICAgIHx8IGZyb21Db2x1bW4gPT0gbnVsbCB8fCBmcm9tQ29sdW1uID09IHVuZGVmaW5lZCB8fCB0b0NvbHVtbiA9PSBudWxsIHx8IHRvQ29sdW1uID09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSBmcm9tUm93OyBpIDw9IHRvUm93OyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IGZyb21Db2x1bW47IGogPD0gdG9Db2x1bW47IGorKykge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gZ1tpXVtqXTtcbiAgICAgICAgICAgIGNvdW50ZXJbbnVtLTFdKys7XG4gICAgICAgICAgICBpZiAoY291bnRlcltudW0tMV0gPiAxKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCB7IGNoZWNrR3JpZCwgY2hlY2tSb3dzQW5kQ29sdW1ucyB9IiwiXG4vLyBnZXR0aW5nIHRoZSBjdXJyZW50IEdyaWQgb3V0IG9mIERPTVxuY29uc3QgZ2V0Q3VycmVudEdyaWQgPSAoKTogbnVtYmVyW11bXSA9PiB7XG4gICAgbGV0IGdyaWQ6IG51bWJlcltdW10gPSBbXTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICAgIGdyaWRbaV0gPSBuZXcgQXJyYXkoOSkuZmlsbChudWxsKTtcbiAgICB9XG4gICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICAgIGlmKGNlbGxzID09PSBudWxsIHx8IGNlbGxzID09PSB1bmRlZmluZWQpIHJldHVybiBudWxsO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPD0gODsgaSsrKSB7XG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPD0gODsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gY2VsbHNbaSo5K2pdOyAvLyBtYXBwcyB0aGUgODEgY2VsbHMgdG8gdGhlIDIgZGltIGFycmF5XG4gICAgICAgICAgICBpZighKHRlbXAgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYoIXRlbXApIHJldHVybiBudWxsOyAvLyBjaGVja2luZyBpZiB0ZW1wIGlzIGZhbHN5XG4gICAgICAgICAgICBjb25zdCB0ZW1wTnVtID0gdGVtcC5pbm5lclRleHQ7XG4gICAgICAgICAgICBncmlkW2ldW2pdID0gTnVtYmVyKHRlbXBOdW0pOyAvLyByZXR1cm4gJzAnIHdoZW4gJ3RlbXBOdW0gPSBudWxsJyFcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ3JpZDtcbn1cblxuZXhwb3J0IHsgZ2V0Q3VycmVudEdyaWQgfSIsImltcG9ydCB7IGNyZWF0ZUJvYXJkIH0gZnJvbSBcIi4vY3JlYXRlXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY2xlYXJpbmcgdGhlIEdyaWQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGNyZWF0ZVZvaWRCb2FyZCA9ICgpOiBudW1iZXJbXVtdID0+IHtcbiAgICBsZXQgZ3JpZDogbnVtYmVyW11bXSA9IFtdO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgZ3JpZFtpXSA9IG5ldyBBcnJheSg5KS5maWxsKG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gZ3JpZDtcbn1cblxuY29uc3QgZGVsZXRlQm9hcmQgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBncmlkYCk7XG4gICAgaWYoZ3JpZCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIHdoaWxlKGdyaWQubGFzdENoaWxkKSB7XG4gICAgICAgIGdyaWQucmVtb3ZlQ2hpbGQoZ3JpZC5sYXN0Q2hpbGQpO1xuICAgIH1cbn1cblxuY29uc3QgY2xlYXJCb2FyZCA9ICgpOiB2b2lkID0+IHtcbiAgICBkZWxldGVCb2FyZCgpO1xuICAgIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBkaXZgKTtcbiAgICBpZihncmlkID09PSBudWxsKSByZXR1cm47XG4gICAgZ3JpZC5pZCA9IGBncmlkYDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChncmlkKTtcbiAgICBjcmVhdGVCb2FyZChjcmVhdGVWb2lkQm9hcmQoKSk7XG59XG5cbmV4cG9ydCB7IGNsZWFyQm9hcmQgfSIsImltcG9ydCB7IHVuZG9TdGFjayB9IGZyb20gXCIuL3VuZG9cIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1jcmVhdGluZyBHcmlkLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gY3JlYXRpbmcgR3JpZCB3aXRoIGV2ZW50TGlzdGVuZXIgaW5wdXR0aW5nIGNlbGxzXG4vLyBhIGZ1bmN0aW9uIGNyZWF0aW5nIGEgOXg5IGdyaWQgb2Ygc3F1YXJlc1xuY29uc3QgY3JlYXRlQm9hcmQgPSAod2l0aEdyaWQ6IG51bWJlcltdW10pOiB2b2lkID0+IHtcbiAgICBjb25zb2xlLmxvZyhgY2FsbGVkICdjcmVhdGVCb2FyZCcgZnVuY3Rpb24gZnJvbTpgKTtcbiAgICB3aXRoR3JpZC5mb3JFYWNoKChlbGVtOiBudW1iZXJbXSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtlbGVtfVxcbmApO1xuICAgIH0pO1xuICAgIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyaWRcIik7XG4gICAgaWYoZ3JpZCA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgLy8gY3JlYXRlIDkgcm93cyBmb3IgdGhlIHN1ZG9rdSBncmlkXG4gICAgd2l0aEdyaWQuZm9yRWFjaCgoZWxlbTogbnVtYmVyW10sIHJvd0luZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGlmKHJvdyA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgncm93Jyk7XG4gICAgICAgIHJvdy5zZXRBdHRyaWJ1dGUoXCJyb3dcIiwgYCR7cm93SW5kZXh9YCk7XG4gICAgICAgIGlmIChyb3dJbmRleCA9PSAyIHx8IHJvd0luZGV4ID09IDUpIHJvdy5jbGFzc0xpc3QuYWRkKCd1bmRlcmxpbmUnKTtcbiAgICAgICAgZ3JpZC5hcHBlbmQocm93KTtcblxuICAgICAgICAvLyBpbnNlcnQgY2VsbHMgaW50byBlYWNoIHJvd1xuICAgICAgICBlbGVtLmZvckVhY2goKHZhbHVlOiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgaWYoY2VsbCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJyb3dcIiwgYCR7cm93SW5kZXh9YClcbiAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKFwiY29sdW1uXCIsIGAke2NvbEluZGV4fWApXG4gICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJjZWxsXCIpO1xuICAgICAgICAgICAgaWYgKGNvbEluZGV4ID09IDIgfHwgY29sSW5kZXggPT0gNSkgY2VsbC5jbGFzc0xpc3QuYWRkKCdyaWdodGxpbmUnKTtcblxuICAgICAgICAgICAgLy8gY29uc3QgY2VsbE51bWJlciA9IE51bWJlci5wYXJzZUludCh2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGlmKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZE51bWJlcik7XG4gICAgICAgICAgICB9IGVsc2UgY2VsbC5pbm5lclRleHQgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByb3cuYXBwZW5kKGNlbGwpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuY29uc3QgYWRkTnVtYmVyID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgZWxlbSA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoIShlbGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSByZXR1cm47XG4gICAgY29uc3Qgcm93ID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJyb3dcIik7XG4gICAgY29uc3QgY29sdW1uID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJjb2x1bW5cIik7XG4gICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtyb3c9XCIke3Jvd31cIl1bY29sdW1uPVwiJHtjb2x1bW59XCJdYCk7XG4gICAgaWYoIShjZWxsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSByZXR1cm47XG4gICAgbGV0IG51bTogbnVtYmVyO1xuICAgIGRvIHtcbiAgICAgICAgY29uc3QgcHJvbXQgPSBwcm9tcHQoXCJFbnRlciBhIG51bWJlciBiZXR3ZWVuIDEgYW5kIDk6XCIpO1xuICAgICAgICBpZihwcm9tdCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBudW0gPSBOdW1iZXIucGFyc2VJbnQocHJvbXQpO1xuICAgIH0gd2hpbGUgKGlzTmFOKE51bWJlcihudW0pKSlcbiAgICBpZiAoIWlzTmFOKE51bWJlcihudW0pKSAmJiBjZWxsICE9PSBudWxsKSB7XG4gICAgICAgIGxldCBudW1iZXJCZWZvcmVDaGFuZ2U6IG51bWJlcjtcbiAgICAgICAgaWYoY2VsbC5pbm5lckhUTUwgPT09IGBgKSBudW1iZXJCZWZvcmVDaGFuZ2UgPSAwO1xuICAgICAgICBlbHNlIG51bWJlckJlZm9yZUNoYW5nZSA9IE51bWJlci5wYXJzZUludChjZWxsLmlubmVySFRNTCk7XG4gICAgICAgIGNlbGwuaW5uZXJUZXh0ID0gbnVtLnRvU3RyaW5nKCk7XG4gICAgICAgIHVuZG9TdGFjay5wdXNoKFtOdW1iZXIucGFyc2VJbnQocm93KSwgTnVtYmVyLnBhcnNlSW50KGNvbHVtbiksIG51bWJlckJlZm9yZUNoYW5nZV0pXG4gICAgfVxufVxuXG5leHBvcnQgeyBjcmVhdGVCb2FyZCB9IiwiaW1wb3J0IHsgZ2V0Q3VycmVudEdyaWQgfSBmcm9tIFwiLi4vR2V0dGVyL2dldEdyaWRcIjtcbmltcG9ydCB7IHBvc3NpYmxlcyB9IGZyb20gXCIuLi9zb2x2ZUdyaWQvcG9zc2libGVOdW1iZXJzRm9yQ2VsbFwiO1xuXG5jb25zdCBzb2x2ZUdyaWQgPSAoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRHcmlkID0gZ2V0Q3VycmVudEdyaWQoKTtcbiAgICBjb25zb2xlLmxvZyhjdXJyZW50R3JpZCk7XG4gICAgbGV0IHBvc3NpYmxlTnVtYmVyc1BlckNlbGwgPSBwb3NzaWJsZXMoY3VycmVudEdyaWQpO1xufVxuXG5leHBvcnQgeyBzb2x2ZUdyaWQgfSIsIi8qKlxuICogdW5kbyBpcyBpbXBsZW1lbnRlZCBieSBhIHN0YWNrIHRoYXQgd2lsbCBiZSBwdXNoZWQgKEtvb3JkaW5hdGVzLCBOdW1iZXIpIFxuICogd2hlbiBhIG51bWJlciBnZXRzIGFkZGVkIHRvIHRoZSBncmlkXG4gKiB0aGUgc3RhY2sgd2lsbCBiZSBwb3BwZWQgd2hlbjogdGhlIHVuZG8gYnV0dG9uIGlzIHByZXNzZWRcbiAqIC0tPiB0aGUgc3RhY2sgbXVzdCBiZSBnbG9iYWwgb2Ygc29tZSBraW5kXG4gKi9cblxuaW50ZXJmYWNlIElTdGFjazxUPiB7XG4gICAgcHVzaChpdGVtOiBUKTogdm9pZDtcbiAgICBwb3AoKTogVCB8IHVuZGVmaW5lZDtcbiAgICBwZWVrKCk6IFQgfCB1bmRlZmluZWQ7XG4gICAgc2l6ZSgpOiBUIHwgbnVtYmVyO1xufVxuXG5hYnN0cmFjdCBjbGFzcyBDb2xsZWN0aW9uPFQ+IHtcbiAgICBwcm90ZWN0ZWQgc3RvcmFnZTogVFtdID0gW107XG4gIFxuICAgIHNpemUoKTogbnVtYmVyIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2UubGVuZ3RoO1xuICAgIH1cbiAgICBhYnN0cmFjdCBpc0Z1bGwoKTogYm9vbGVhbjtcbiAgfVxuXG4gIGNsYXNzIFN0YWNrQ29sbGVjdGlvbjxUPiBleHRlbmRzIENvbGxlY3Rpb248VD4gaW1wbGVtZW50cyBJU3RhY2s8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FwYWNpdHk6IG51bWJlciA9IEluZmluaXR5KSB7XG4gICAgICBzdXBlcigpO1xuICAgIH1cbiAgXG4gICAgcHVzaChpdGVtOiBUKSB7XG4gICAgICBpZiAodGhpcy5pc0Z1bGwoKSkge1xuICAgICAgICB0aHJvdyBFcnJvcihcIlN0YWNrIGhhcyByZWFjaGVkIG1heCBjYXBhY2l0eSwgeW91IGNhbm5vdCBhZGQgbW9yZSBpdGVtc1wiKTtcbiAgICAgIH1cbiAgICAgIC8vIEluIHRoZSBkZXJpdmVkIGNsYXNzLCB3ZSBjYW4gYWNjZXNzIHByb3RlY3RlZCBwcm9wZXJ0aWVzIG9mIHRoZSBhYnN0cmFjdCBjbGFzc1xuICAgICAgdGhpcy5zdG9yYWdlLnB1c2goaXRlbSk7XG4gICAgfVxuICBcbiAgICBwb3AoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yYWdlLnBvcCgpO1xuICAgIH1cbiAgXG4gICAgcGVlaygpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VbdGhpcy5zaXplKCkgLSAxXTtcbiAgICB9XG4gIFxuICAgIC8vIEltcGxlbWVudGF0aW9uIG9mIHRoZSBhYnN0cmFjdCBtZXRob2RcbiAgICBpc0Z1bGwoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5jYXBhY2l0eSA9PT0gdGhpcy5zaXplKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGEgU3RhY2sgQ29sbGVjdGlvbiBmaWxsZWQgd2l0aCBhIDIgZGltIG51bWJlciBBcnJheTpcbiAgICogZS5nOiBpbiB0aGUgZ3JpZCB0aGUgY2VsbCBpbiByb3cgMywgY29sdW1uIDUgZ2V0cyB1cGRhdGVkIHRvIDc6XG4gICAqIHN0YWNrRm9yVW5kby5wdXNoKFszLDUsMF0pIC0tPiBpbiB0aGUgY3JlYXRpbmdHcmlkLmFkZE51bWJlcigpXG4gICAqIDAgc2F5cyBpbiB0aGlzIGNhc2UsIHRoYXQgb25lIHN0ZXAgYmVmb3JlIHRoZSBjZWxsIHdhcyBub3QgZmlsbGVkXG4gICAqIElmIHRoZSB1bmRvIGJ1dHRvbiBpcyBwcmVzc2VkIHRoZSBpbm5lclRleHQgaHRtbCBvZiB0aGUgY2VsbCBpbiByb3cgMywgY29sdW1uIDUgd2lsbCBiZSBzZXQgdG8gemVyby5cbiAgICogLi4uYW5kOiBzdGFja0ZvclVuZG8ucG9wKCkgLS0+IGluIHRoZSBjcmVhdGluZ0dyaWQuYWRkTnVtYmVyKClcbiAgICovXG4gIGNvbnN0IHVuZG9TdGFjayA9IG5ldyBTdGFja0NvbGxlY3Rpb248bnVtYmVyW10+KCk7XG5cbiAgY29uc3QgdW5kb1N0ZXAgPSAoKTogc3RyaW5nID0+IHtcbiAgICBpZih1bmRvU3RhY2sucGVlaygpID09PSBudWxsIHx8IHVuZG9TdGFjay5wZWVrKCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBzdHIgPSBgdW5kb1N0YWNrIGlzIG51bGwgb3IgdW5kZWZpbmVkYDtcbiAgICAgICAgYWxlcnQoc3RyKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9IGVsc2UgaWYodW5kb1N0YWNrLnNpemUoKSA9PT0gMCkge1xuICAgICAgICBjb25zdCBzdHIgPSBgdGhlIHVuZG9TdGFjayBpcyBub3QgeWV0IGJ1aWx0YDtcbiAgICAgICAgYWxlcnQoc3RyKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgY29uc3QgYXJyID0gdW5kb1N0YWNrLnBvcCgpO1xuICAgIGlmKGFyci5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgY29uc3Qgc3RyID0gYHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggZmV0Y2hpbmcgYW4gdW5kb1N0YWNrLWVsZW1lbnRgO1xuICAgICAgICBhbGVydChzdHIpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW3Jvdz1cIiR7YXJyWzBdfVwiXVtjb2x1bW49XCIke2FyclsxXX1cIl1gKTtcbiAgICBjb25zb2xlLmxvZyhgdW5kaWQgcm93ICR7YXJyWzBdKzF9IGNvbHVtbiAke2FyclsxXSsxfSBmcm9tICR7Y2VsbC5pbm5lckhUTUx9IHRvICR7YXJyWzJdfWApO1xuICAgIGlmKGFyclsyXSA9PT0gMCkgY2VsbC5pbm5lckhUTUwgPSBgYDtcbiAgICBlbHNlIGNlbGwuaW5uZXJIVE1MID0gYXJyWzJdLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIGBnb29kIHdvcmsgbWF0ZWA7XG4gIH1cblxuXG5leHBvcnR7IHVuZG9TdGFjaywgdW5kb1N0ZXAgfSIsIi8vIG1heWJlOiBnZXR0aW5nIGEgcmFuZG9tIGdyaWQgZnJvbSBhIERCIGxhdGVyIChteSBvd24gb3IgYSBwdWJsaWMpXG4vLyBlZGl0OiBybHkgbmVjZXNzYXJ5P1xuY29uc3QgdGVzdEdyaWQ6IG51bWJlcltdW10gPSBbXG4gICAgW251bGwsIDUsIG51bGwsIG51bGwsIDMsIG51bGwsIG51bGwsIG51bGwsIG51bGxdLFxuICAgIFtudWxsLCA2LCA5LCBudWxsLCBudWxsLCBudWxsLCA1LCBudWxsLCAxXSxcbiAgICBbbnVsbCwgbnVsbCwgNywgOSwgbnVsbCwgbnVsbCwgbnVsbCwgNCwgOF0sXG5cbiAgICBbNywgOSwgbnVsbCwgMSwgbnVsbCwgNSwgNiwgOCwgMl0sXG4gICAgWzQsIDIsIG51bGwsIDMsIDgsIDksIDcsIG51bGwsIDVdLFxuICAgIFsxLCA4LCBudWxsLCBudWxsLCA2LCBudWxsLCBudWxsLCBudWxsLCBudWxsXSxcblxuICAgIFtudWxsLCBudWxsLCA4LCBudWxsLCBudWxsLCBudWxsLCA0LCBudWxsLCBudWxsXSxcbiAgICBbbnVsbCwgNywgbnVsbCwgNSwgbnVsbCwgNCwgbnVsbCwgbnVsbCwgbnVsbF0sXG4gICAgW251bGwsIG51bGwsIG51bGwsIG51bGwsIDcsIDMsIG51bGwsIDUsIDZdXG5dO1xuY29uc3QgdGVzdEdyaWRGaWxsZWRSaWdodDogc3RyaW5nW11bXSA9IFtcbiAgICBbXCI4XCIsIFwiNVwiLCBcIjRcIiwgXCI3XCIsIFwiM1wiLCBcIjFcIiwgXCIyXCIsIFwiNlwiLCBcIjlcIl0sXG4gICAgW1wiM1wiLCBcIjZcIiwgXCI5XCIsIFwiNFwiLCBcIjJcIiwgXCI4XCIsIFwiNVwiLCBcIjdcIiwgXCIxXCJdLFxuICAgIFtcIjJcIiwgXCIxXCIsIFwiN1wiLCBcIjlcIiwgXCI1XCIsIFwiNlwiLCBcIjNcIiwgXCI0XCIsIFwiOFwiXSxcblxuICAgIFtcIjdcIiwgXCI5XCIsIFwiM1wiLCBcIjFcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI4XCIsIFwiMlwiXSxcbiAgICBbXCI0XCIsIFwiMlwiLCBcIjZcIiwgXCIzXCIsIFwiOFwiLCBcIjlcIiwgXCI3XCIsIFwiMVwiLCBcIjVcIl0sXG4gICAgW1wiMVwiLCBcIjhcIiwgXCI1XCIsIFwiMlwiLCBcIjZcIiwgXCI3XCIsIFwiOVwiLCBcIjNcIiwgXCI0XCJdLFxuXG4gICAgW1wiNVwiLCBcIjNcIiwgXCI4XCIsIFwiNlwiLCBcIjFcIiwgXCIyXCIsIFwiNFwiLCBcIjlcIiwgXCI3XCJdLFxuICAgIFtcIjZcIiwgXCI3XCIsIFwiMVwiLCBcIjVcIiwgXCI5XCIsIFwiNFwiLCBcIjhcIiwgXCIyXCIsIFwiM1wiXSxcbiAgICBbXCI5XCIsIFwiNFwiLCBcIjJcIiwgXCI4XCIsIFwiN1wiLCBcIjNcIiwgXCIxXCIsIFwiNVwiLCBcIjZcIl1cbl07XG5jb25zdCB0ZXN0R3JpZEZpbGxlZFdyb25nOiBzdHJpbmdbXVtdID0gW1xuICAgIFtcIjVcIiwgXCI4XCIsIFwiNFwiLCBcIjdcIiwgXCIzXCIsIFwiMVwiLCBcIjJcIiwgXCI2XCIsIFwiOVwiXSxcbiAgICBbXCIzXCIsIFwiNlwiLCBcIjlcIiwgXCI0XCIsIFwiMlwiLCBcIjhcIiwgXCI1XCIsIFwiN1wiLCBcIjFcIl0sXG4gICAgW1wiMlwiLCBcIjFcIiwgXCI3XCIsIFwiOVwiLCBcIjVcIiwgXCI2XCIsIFwiM1wiLCBcIjRcIiwgXCI4XCJdLFxuXG4gICAgW1wiN1wiLCBcIjlcIiwgXCIzXCIsIFwiMVwiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjhcIiwgXCIyXCJdLFxuICAgIFtcIjRcIiwgXCIyXCIsIFwiNlwiLCBcIjNcIiwgXCI4XCIsIFwiOVwiLCBcIjdcIiwgXCIxXCIsIFwiNVwiXSxcbiAgICBbXCIxXCIsIFwiOFwiLCBcIjVcIiwgXCIyXCIsIFwiNlwiLCBcIjdcIiwgXCI5XCIsIFwiM1wiLCBcIjRcIl0sXG5cbiAgICBbXCI1XCIsIFwiM1wiLCBcIjhcIiwgXCI2XCIsIFwiMVwiLCBcIjJcIiwgXCI0XCIsIFwiOVwiLCBcIjdcIl0sXG4gICAgW1wiNlwiLCBcIjdcIiwgXCIxXCIsIFwiNVwiLCBcIjlcIiwgXCI0XCIsIFwiOFwiLCBcIjJcIiwgXCIzXCJdLFxuICAgIFtcIjlcIiwgXCI0XCIsIFwiMlwiLCBcIjhcIiwgXCI3XCIsIFwiM1wiLCBcIjFcIiwgXCI1XCIsIFwiNlwiXVxuXTtcblxuZXhwb3J0e1xuICAgIHRlc3RHcmlkLFxuICAgIHRlc3RHcmlkRmlsbGVkUmlnaHQsXG4gICAgdGVzdEdyaWRGaWxsZWRXcm9uZ1xufSIsImltcG9ydCB7IGZpbmRTaW5nbGUgfSBmcm9tIFwiLi9oaWRkZW5TaW5nbGVcIjtcblxuXG5jbGFzcyBDZWxsIHtcbiAgICBwcml2YXRlIHJvdzogbnVtYmVyO1xuICAgIHByaXZhdGUgY29sdW1uOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBib3g6IG51bWJlcjtcbiAgICBwcml2YXRlIHBvc3NpYmxlVmFsdWVzOiBudW1iZXJbXTtcblxuICAgIGNvbnN0cnVjdG9yKHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlciwgcG9zc2libGVzVmFsdWVzOiBudW1iZXJbXSkge1xuICAgICAgICB0aGlzLnJvdyA9IHJvdztcbiAgICAgICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgICAgIC8vIGJveE51bWJlciA9IGJveFJvdyAqIDMgKyBib3hDb2x1bW5cbiAgICAgICAgdGhpcy5ib3ggPSBNYXRoLmZsb29yKHRoaXMucm93IC8gMykgKiAzICsgTWF0aC5mbG9vcih0aGlzLmNvbHVtbiAvIDMpO1xuICAgICAgICB0aGlzLnBvc3NpYmxlVmFsdWVzID0gcG9zc2libGVzVmFsdWVzO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0Um93KCkge3JldHVybiB0aGlzLnJvd31cbiAgICBwdWJsaWMgZ2V0Q29sdW1uKCkge3JldHVybiB0aGlzLmNvbHVtbn1cbiAgICBwdWJsaWMgZ2V0Qm94KCkge3JldHVybiB0aGlzLmJveH1cbiAgICBwdWJsaWMgZ2V0UG9zc2libGVWYWx1ZXMoKSB7cmV0dXJuIHRoaXMucG9zc2libGVWYWx1ZXN9XG4gIH1cblxuXG4vKipcbiAqIGlzIGNhbGxlZCBieSAuLi9NYW5hZ2luZ0dyaWQvc29sdmUudHNcbiAqIEBwYXJhbSB3aXRoR3JpZCBcbiAqIEByZXR1cm5zIENlbGxbXSBcbiAqL1xuY29uc3QgcG9zc2libGVzID0gKHdpdGhHcmlkOiBudW1iZXJbXVtdKTogQ2VsbFtdID0+IHtcbiAgICBsZXQgYWxsRnJlZUNlbGxzID0gZ2V0QWxsTnVtYmVycyh3aXRoR3JpZCk7XG4gICAgY29uc29sZS5sb2coYWxsRnJlZUNlbGxzKTtcbiAgICBcbiAgICByZXR1cm47XG59XG5cbi8qKlxuICogaXMgY2FsbGVkIGJ5IC9wb3NzaWJsZXNcbiAqIEBwYXJhbSB3aXRoR3JpZCBcbiAqIEByZXR1cm5zIEZvciBlYWNoIGNlbGwgPT09IFwiXCIgW1tyb3csIGNvbHVtbiwgW2FycmF5T2ZOdW1iZXJzMS05XV1dXG4gKi9cbiAgY29uc3QgZ2V0QWxsTnVtYmVycyA9ICh3aXRoR3JpZDogbnVtYmVyW11bXSk6IENlbGxbXSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2dldEFsbE51bWJlcnMgZ290IGNhbGxlZCcpO1xuICAgIGxldCBmcmVlQ2VsbHM6IENlbGxbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gODsgaisrKSB7XG4gICAgICAgIGlmICh3aXRoR3JpZFtpXVtqXSA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbChpLGosWzEsMiwzLDQsNSw2LDcsOCw5XSk7XG4gICAgICAgICAgZnJlZUNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZyZWVDZWxscztcbiAgfTtcbiAgXG4gIFxuXG5leHBvcnQgeyBwb3NzaWJsZXMgfTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiaW1wb3J0IHsgY2hlY2tHcmlkIH0gZnJvbSBcIi4vQ2hlY2tpbmdHcmlkL2NoZWNraW5nR3JpZFwiO1xuaW1wb3J0IHsgY3JlYXRlQm9hcmQgfSBmcm9tIFwiLi9NYW5hZ2luZ0dyaWQvY3JlYXRlXCI7XG5pbXBvcnQgeyBjbGVhckJvYXJkIH0gZnJvbSBcIi4vTWFuYWdpbmdHcmlkL2NsZWFyXCI7XG5pbXBvcnQgeyB1bmRvU3RlcCB9IGZyb20gXCIuL01hbmFnaW5nR3JpZC91bmRvXCI7XG5pbXBvcnQgKiBhcyBSYW5kb21HcmlkIGZyb20gXCIuL1JlcG9zaXRvcnkvZ2V0dGluZ1JhbmRvbUdyaWRcIjtcbmltcG9ydCAqIGFzIFJlcG8gZnJvbSBcIi4vUmVwb3NpdG9yeS9zdWRva3VUZXN0R3JpZFwiXG5pbXBvcnQgeyBzb2x2ZUdyaWQgfSBmcm9tIFwiLi9NYW5hZ2luZ0dyaWQvc29sdmVcIjtcbi8vIGltcG9ydCB7IGdldEN1cnJlbnRHcmlkIH0gZnJvbSBcIi4vR2V0dGVyL2dldEdyaWRcIjtcblxuLy8gZGVidWdnZXI7IFxuLy8gbGludDsgem9kOyBwcmV0dGllciBsaWJzIFxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYnV0dG9ucy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgY2xlYXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgY2xlYXJgKTtcbmlmKGNsZWFyQnV0dG9uICE9PSBudWxsKSBjbGVhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIGNsZWFyQm9hcmQpO1xuZWxzZSBhbGVydChgd2UndmUgZ290IGEgcHJvYmxlbSB3aXRoIHRoZSBjaGVjayBidXR0b24gOi9gKTtcblxuY29uc3QgY2hlY2tlckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hlY2tcIik7XG5pZihjaGVja2VyQnV0dG9uICE9PSBudWxsKSBjaGVja2VyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGVja0dyaWQpO1xuZWxzZSBhbGVydChgd2UndmUgZ290IGEgcHJvYmxlbSB3aXRoIHRoZSBjaGVjayBidXR0b25gKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwielwiICYmIGUuY3RybEtleSA9PT0gdHJ1ZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIEV4ZWN1dGUgVW5kbyBmdW5jdGlvbiB3aGVuIHN0cmcrdSBpcyBwcmVzc2VkXG4gICAgICAgIHVuZG9TdGVwKCk7XG4gICAgfVxufSk7XG5cbmNvbnN0IHVuZG9CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdW5kb2ApO1xuaWYodW5kb0J1dHRvbiAhPT0gbnVsbCkge1xuICAgIHVuZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVuZG9TdGVwKTsgICAgIFxufSBlbHNlIGFsZXJ0KGB3ZSd2ZSBnb3QgYSBwcm9ibGVtIHdpdGggdGhlIHVuZG8gYnV0dG9uYCk7XG5cbmNvbnN0IHNvbHZlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbHZlJyk7XG5pZihzb2x2ZUJ1dHRvbiAhPT0gbnVsbCB8fCBzb2x2ZUJ1dHRvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc29sdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzb2x2ZUdyaWQpO1xufSBlbHNlIGFsZXJ0KGB3ZSd2ZSBnb3QgYSBwcm9ibGVtIHdpdGggdGhlIHVuZG8gYnV0dG9uYCk7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWV4ZWN1dGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBjcmVhdGVCb2FyZChSYW5kb21HcmlkLmdldFJhbmRvbUhhcmRHcmlkKCkpO1xuLy8gY3JlYXRlQm9hcmQoUmFuZG9tR3JpZC5nZXRSYW5kb21NZWRpdW1HcmlkKCkpO1xuLy8gY3JlYXRlQm9hcmQoUmFuZG9tR3JpZC5nZXRSYW5kb21FYXN5R3JpZCgpKTtcbmNyZWF0ZUJvYXJkKFJlcG8udGVzdEdyaWQpOyJdLCJuYW1lcyI6WyJjaGVja0dyaWQiLCJvdXRwdXQiLCJnIiwiZ2V0Q3VycmVudEdyaWQiLCJhbGVydCIsImdyaWRJc0Z1bGwiLCJjaGVja1Jvd3NBbmRDb2x1bW5zIiwiY2hlY2tCb3hlcyIsImkiLCJqIiwiY3VycmVudEdyaWQiLCJjb3VudGVyUm93cyIsIkFycmF5IiwiZmlsbCIsImNvdW50ZXJDb2x1bW5zIiwibnVtUm93IiwibnVtQ29sIiwiYm94Q2hlY2tIZWxwZXIiLCJmcm9tUm93IiwidG9Sb3ciLCJmcm9tQ29sdW1uIiwidG9Db2x1bW4iLCJjb3VudGVyIiwibnVtIiwiZ3JpZCIsImNlbGxzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGVtcCIsIkhUTUxFbGVtZW50IiwidGVtcE51bSIsImlubmVyVGV4dCIsIk51bWJlciIsImNsZWFyQm9hcmQiLCJnZXRFbGVtZW50QnlJZCIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGVsZXRlQm9hcmQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJib2R5IiwiYXBwZW5kIiwiY3JlYXRlQm9hcmQiLCJjcmVhdGVWb2lkQm9hcmQiLCJ3aXRoR3JpZCIsImNvbnNvbGUiLCJsb2ciLCJmb3JFYWNoIiwiZWxlbSIsInJvd0luZGV4Iiwicm93IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwidmFsdWUiLCJjb2xJbmRleCIsImNlbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkTnVtYmVyIiwidG9TdHJpbmciLCJldmVudCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImNvbHVtbiIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9tdCIsInByb21wdCIsInBhcnNlSW50IiwiaXNOYU4iLCJudW1iZXJCZWZvcmVDaGFuZ2UiLCJpbm5lckhUTUwiLCJ1bmRvU3RhY2siLCJwdXNoIiwic29sdmVHcmlkIiwicG9zc2libGVzIiwiY2FwYWNpdHkiLCJpdGVtIiwidGhpcyIsImlzRnVsbCIsIkVycm9yIiwic3RvcmFnZSIsInBvcCIsInBlZWsiLCJzaXplIiwibGVuZ3RoIiwidW5kb1N0ZXAiLCJ1bmRlZmluZWQiLCJzdHIiLCJhcnIiLCJ0ZXN0R3JpZCIsInRlc3RHcmlkRmlsbGVkUmlnaHQiLCJ0ZXN0R3JpZEZpbGxlZFdyb25nIiwicG9zc2libGVzVmFsdWVzIiwiYm94IiwiTWF0aCIsImZsb29yIiwicG9zc2libGVWYWx1ZXMiLCJnZXRSb3ciLCJnZXRDb2x1bW4iLCJnZXRCb3giLCJnZXRQb3NzaWJsZVZhbHVlcyIsImFsbEZyZWVDZWxscyIsImdldEFsbE51bWJlcnMiLCJmcmVlQ2VsbHMiLCJDZWxsIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiY2xlYXJCdXR0b24iLCJjaGVja2VyQnV0dG9uIiwid2luZG93IiwiZSIsImtleSIsImN0cmxLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInVuZG9CdXR0b24iLCJzb2x2ZUJ1dHRvbiIsIlJlcG8iXSwic291cmNlUm9vdCI6IiJ9