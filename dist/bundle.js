(()=>{"use strict";var e={148:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkRowsAndColumns=t.checkGrid=void 0;var n=r(12);t.checkGrid=function(){var e;return null==(0,n.getCurrentGrid)()?(e="something went wrong with fetching the grid :S",alert(e),e):1!=o()?(e="the grid is not fully filled :S",alert(e),e):1!=i()&&1!=a()?(e="the grid is incorrect :S",alert(e),e):(e="the grid is correct :D. Well done!",alert(e),e)};var o=function(){for(var e=(0,n.getCurrentGrid)(),t=0;t<9;t++)for(var r=0;r<9;r++)if(""==e[t][r])return!1;return!0},i=function(){for(var e=(0,n.getCurrentGrid)(),t=new Array(9).fill(0),r=new Array(9).fill(0),o=0;o<9;o++){t.fill(0),r.fill(0);for(var i=0;i<9;i++){var a=Number.parseInt(e[o][i]),u=Number.parseInt(e[i][o]);if(t[a-1]++,r[u-1]++,1!=t[a-1])return!1;if(1!=r[u-1])return!1}}return!0};t.checkRowsAndColumns=i;var a=function(){return 1==u(0,2,0,2)&&1==u(0,2,3,5)&&1==u(0,2,6,8)&&1==u(3,5,0,2)&&1==u(3,5,6,8)&&1==u(3,5,0,2)&&1==u(5,8,0,2)&&1==u(5,8,3,5)&&1==u(5,8,5,8)},u=function(e,t,r,o){for(var i=(0,n.getCurrentGrid)(),a=new Array(9).fill(0),u=e;u<=t;u++)for(var c=r;c<=o;c++){var l=Number.parseInt(i[u][c]);if(a[l-1]++,a[l-1]>1)return!1}return!0}},12:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentGrid=void 0,t.getCurrentGrid=function(){for(var e=[],t=0;t<9;t++)e[t]=new Array(9).fill("");var r=document.querySelectorAll(".cell");if(null===r)return[[""]];for(t=0;t<=8;t++)for(var n=0;n<=8;n++){var o=r[9*t+n];if(!(o instanceof HTMLElement))return[[""]];if(!o)return[[""]];var i=o.innerText;e[t][n]=i}return e}},284:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearBoard=void 0;var n=r(741);t.clearBoard=function(){!function(){var e=document.getElementById("grid");null!==e&&e.remove()}();var e=document.createElement("div");null!==e&&(e.id="grid",document.body.append(e),(0,n.createBoard)(function(){for(var e=[],t=0;t<9;t++)e[t]=new Array(9).fill("");return e}()))}},741:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBoard=void 0;var n=r(295);t.createBoard=function(e){var t=document.getElementById("grid");null!==t&&e.forEach((function(e,r){var n=document.createElement("div");null!==n&&(n.classList.add("row"),n.setAttribute("row","".concat(r)),2!=r&&5!=r||n.classList.add("underline"),t.append(n),e.forEach((function(e,t){var i=document.createElement("div");null!==i&&(i.setAttribute("row","".concat(r)),i.setAttribute("column","".concat(t)),i.classList.add("cell"),2!=t&&5!=t||i.classList.add("rightline"),""===e.toString()?(i.setAttribute("type","button"),i.addEventListener("click",o)):i.innerText=e.toString(),n.append(i))})))}))};var o=function(e){var t=e.target;if(t instanceof HTMLElement){var r=t.getAttribute("row"),o=t.getAttribute("column"),i=document.querySelector('[row="'.concat(r,'"][column="').concat(o,'"]'));if(i instanceof HTMLElement){var a;do{var u=prompt("Enter a number between 1 and 9:");if(null===u)return;a=Number.parseInt(u)}while(isNaN(Number(a)));if(!isNaN(Number(a))&&null!==i){var c;c=""===i.innerHTML?0:Number.parseInt(i.innerHTML),i.innerText=a.toString(),n.undoStack.push([Number.parseInt(r),Number.parseInt(o),c])}}}}},295:function(e,t){var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.undoStep=t.undoStack=void 0;var o=new(function(e){function t(t){void 0===t&&(t=1/0);var r=e.call(this)||this;return r.capacity=t,r}return n(t,e),t.prototype.push=function(e){if(this.isFull())throw Error("Stack has reached max capacity, you cannot add more items");this.storage.push(e)},t.prototype.pop=function(){return this.storage.pop()},t.prototype.peek=function(){return this.storage[this.size()-1]},t.prototype.isFull=function(){return this.capacity===this.size()},t}(function(){function e(){this.storage=[]}return e.prototype.size=function(){return this.storage.length},e}()));t.undoStack=o,t.undoStep=function(){if(null===o.peek()||void 0===o.peek()){var e="undoStack is null or undefined";return alert(e),e}if(0===o.size())return e="the undoStack is not yet built",alert(e),e;var t=o.pop();if(3!==t.length)return e="something went wrong with fetching an undoStack-element",alert(e),e;var r=document.querySelector('[row="'.concat(t[0],'"][column="').concat(t[1],'"]'));return console.log("undid row ".concat(t[0]+1," column ").concat(t[1]+1," from ").concat(r.innerHTML," to ").concat(t[2])),0===t[2]?r.innerHTML="":r.innerHTML=t[2].toString(),"good work mate"}},745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.testGridFilledWrong=t.testGridFilledRight=t.testGrid=void 0,t.testGrid=[["","5","","","3","","","",""],["","6","9","","","","5","","1"],["","","7","9","","","","4","8"],["7","9","","1","","5","6","8","2"],["4","2","","3","8","9","7","","5"],["1","8","","","6","","","",""],["","","8","","","","4","",""],["","7","","5","","4","","",""],["","","","","7","3","","5","6"]],t.testGridFilledRight=[["8","5","4","7","3","1","2","6","9"],["3","6","9","4","2","8","5","7","1"],["2","1","7","9","5","6","3","4","8"],["7","9","3","1","4","5","6","8","2"],["4","2","6","3","8","9","7","1","5"],["1","8","5","2","6","7","9","3","4"],["5","3","8","6","1","2","4","9","7"],["6","7","1","5","9","4","8","2","3"],["9","4","2","8","7","3","1","5","6"]],t.testGridFilledWrong=[["5","8","4","7","3","1","2","6","9"],["3","6","9","4","2","8","5","7","1"],["2","1","7","9","5","6","3","4","8"],["7","9","3","1","4","5","6","8","2"],["4","2","6","3","8","9","7","1","5"],["1","8","5","2","6","7","9","3","4"],["5","3","8","6","1","2","4","9","7"],["6","7","1","5","9","4","8","2","3"],["9","4","2","8","7","3","1","5","6"]]}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(()=>{var e=r(148),t=r(741),n=r(284),o=r(295),i=r(745),a=document.getElementById("clear");null!==a?a.addEventListener("click",n.clearBoard):alert("we've got a problem with the check button :/");var u=document.getElementById("check");null!==u?u.addEventListener("click",e.checkGrid):alert("we've got a problem with the check button"),window.addEventListener("keydown",(function(e){"z"===e.key&&!0===e.ctrlKey&&(e.preventDefault(),(0,o.undoStep)())}));var c=document.getElementById("undo");null!==c?c.addEventListener("click",o.undoStep):alert("we've got a problem with the undo button"),(0,t.createBoard)(i.testGrid)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNwQyxDQUFDLEdBQUksR0FBSSxJQUFLLElBQUssR0FBSSxHQUFJLEdBQUksSUFBSyxLQUVwQyxDQUFDLElBQUssSUFBSyxHQUFJLElBQUssR0FBSSxJQUFLLElBQUssSUFBSyxLQUN2QyxDQUFDLElBQUssSUFBSyxHQUFJLElBQUssSUFBSyxJQUFLLElBQUssR0FBSSxLQUN2QyxDQUFDLElBQUssSUFBSyxHQUFJLEdBQUksSUFBSyxHQUFJLEdBQUksR0FBSSxJQUVwQyxDQUFDLEdBQUksR0FBSSxJQUFLLEdBQUksR0FBSSxHQUFJLElBQUssR0FBSSxJQUNuQyxDQUFDLEdBQUksSUFBSyxHQUFJLElBQUssR0FBSSxJQUFLLEdBQUksR0FBSSxJQUNwQyxDQUFDLEdBQUksR0FBSSxHQUFJLEdBQUksSUFBSyxJQUFLLEdBQUksSUFBSyxNQStCcEMsRUFBQUMsb0JBN0JvQyxDQUNwQyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUV6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUV6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxNQW1CekMsRUFBQUMsb0JBakJvQyxDQUNwQyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUV6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUV6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUN6QyxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLLEdDdEN6Q0MsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCVixJQUFqQlcsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JKLEdBQVVLLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBR3BFSSxFQUFPRCxPQUNmLEMsTUN0QkEsYUFDQSxTQUNBLFNBQ0EsU0FFQSxTQVFNSSxFQUFjckUsU0FBU08sZUFBZSxTQUN6QixPQUFoQjhELEVBQXNCQSxFQUFZekMsaUJBQWlCLFFBQVMsRUFBQXRCLFlBQzFEN0IsTUFBTSxnREFFWCxJQUFNNkYsRUFBZ0J0RSxTQUFTTyxlQUFlLFNBQ3pCLE9BQWxCK0QsRUFBd0JBLEVBQWMxQyxpQkFBaUIsUUFBUyxFQUFBdkQsV0FDOURJLE1BQU0sNkNBRVg4RixPQUFPM0MsaUJBQWlCLFdBQVcsU0FBUzRDLEdBQzFCLE1BQVZBLEVBQUVDLE1BQTZCLElBQWRELEVBQUVFLFVBQ25CRixFQUFFRyxrQkFFRixJQUFBdkIsWUFFUixJQUVBLElBQU13QixFQUFhNUUsU0FBU08sZUFBZSxRQUN6QixPQUFmcUUsRUFDQ0EsRUFBV2hELGlCQUFpQixRQUFTLEVBQUF3QixVQUlwQzNFLE1BQU0sNkNBT1gsSUFBQXFDLGFBQVkrRCxFQUFLbkIsUyIsInNvdXJjZXMiOlsid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvQ2hlY2tpbmdHcmlkL2NoZWNraW5nR3JpZC50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL0dldHRlci9nZXRHcmlkLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvTWFuYWdpbmdHcmlkL2NsZWFyaW5nR3JpZC50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL01hbmFnaW5nR3JpZC9jcmVhdGluZ0dyaWQudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9NYW5hZ2luZ0dyaWQvdW5kby50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL1JlcG9zaXRvcnkvc3Vkb2t1VGVzdEdyaWQudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEN1cnJlbnRHcmlkIH0gZnJvbSBcIi4uL0dldHRlci9nZXRHcmlkXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY2hlY2tpbmcgdGhlIEdyaWQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBmdW5jdGlvbnMgZm9yIHRoZSBjaGVjayBCdXR0b25cblxuLyoqXG4gKiB0aGUgbWFpbiBjaGVja2luZyBmdW5jdGlvbiB0aGF0IHdpbGwgdXNlIGFsbCBvdGhlciBmdW5jdGlvbiBpbiB0aGlzIGZpbGVcbiAqL1xuY29uc3QgY2hlY2tHcmlkID0gKCk6IHN0cmluZyA9PiB7XG4gICAgbGV0IG91dHB1dDogc3RyaW5nO1xuICAgIGNvbnN0IGcgPSBnZXRDdXJyZW50R3JpZCgpO1xuICAgIGlmIChnID09PSBudWxsIHx8IGcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvdXRwdXQgPSBgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBmZXRjaGluZyB0aGUgZ3JpZCA6U2A7XG4gICAgICAgIGFsZXJ0KG91dHB1dCk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfWVsc2UgaWYgKGdyaWRJc0Z1bGwoKSAhPSB0cnVlKSB7XG4gICAgICAgIG91dHB1dCA9IGB0aGUgZ3JpZCBpcyBub3QgZnVsbHkgZmlsbGVkIDpTYDtcbiAgICAgICAgYWxlcnQob3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9ZWxzZSBpZiAoY2hlY2tSb3dzQW5kQ29sdW1ucygpICE9IHRydWUgJiYgY2hlY2tCb3hlcygpICE9IHRydWUpIHtcbiAgICAgICAgb3V0cHV0ID0gYHRoZSBncmlkIGlzIGluY29ycmVjdCA6U2A7XG4gICAgICAgIGFsZXJ0KG91dHB1dCk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfWVsc2Uge1xuICAgICAgICBvdXRwdXQgPSBgdGhlIGdyaWQgaXMgY29ycmVjdCA6RC4gV2VsbCBkb25lIWA7XG4gICAgICAgIGFsZXJ0KG91dHB1dCApO1xuICAgICAgICByZXR1cm4gb3V0cHV0XG4gICAgfTtcbn1cblxuY29uc3QgZ3JpZElzRnVsbCA9ICgpOiBib29sZWFuICAgPT4ge1xuICAgIGNvbnN0IGcgPSBnZXRDdXJyZW50R3JpZCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgOTsgaisrKSB7XG4gICAgICAgICAgICBpZiAoZ1tpXVtqXSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIGEgbG90IG9mIHRyb3VibGUgd2l0aCB0aGlzIG9uZS4gU2V0IHRoZSBjb3VudGVyIEFycmF5IHRvIGFsbCAwcyBhZnRlciBlYWNoIHJvdy9jb2x1bW47XG4gKiAtLT4gY291bnRpbmcgdGhlIG9jY3VycmVuY2Ugb2YgbnVtYmVycyBpbiBlYWNoIHJvdy9jb2x1bW4sIGNoZWNraW5nIGlmIGl0IGlzIGVxdWFsIHRvIDFcbiAqIEByZXR1cm5zIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgc3Vkb2t1IGdyaWQncyByb3dzIGFuZCBjb2x1bW5zIGFyZSBjb3JyZWN0IFxuICogYXMgcGVyIHN1ZG9rdSBydWxlc1xuICovXG5jb25zdCBjaGVja1Jvd3NBbmRDb2x1bW5zID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnN0IGcgPSBnZXRDdXJyZW50R3JpZCgpO1xuICAgIGxldCBjb3VudGVyUm93cyA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgIGxldCBjb3VudGVyQ29sdW1ucyA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICAgIGNvdW50ZXJSb3dzLmZpbGwoMCk7IFxuICAgICAgICBjb3VudGVyQ29sdW1ucy5maWxsKDApO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDk7IGorKykge1xuICAgICAgICAgICAgY29uc3QgbnVtUm93ID0gTnVtYmVyLnBhcnNlSW50KGdbaV1bal0pO1xuICAgICAgICAgICAgY29uc3QgbnVtQ29sID0gTnVtYmVyLnBhcnNlSW50KGdbal1baV0pO1xuICAgICAgICAgICAgY291bnRlclJvd3NbbnVtUm93LTFdKys7XG4gICAgICAgICAgICBjb3VudGVyQ29sdW1uc1tudW1Db2wtMV0rKztcbiAgICAgICAgICAgIGlmKGNvdW50ZXJSb3dzW251bVJvdy0xXSAhPSAxKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZihjb3VudGVyQ29sdW1uc1tudW1Db2wtMV0gIT0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGV2ZW4gb25lIGVsZW0gb2YgdGhlIGNvdW50QXJyYXlzIGlzIG5vdCBlcXVhbCAxIGZhbHNlIHdpbGwgYmUgcmV0dXJuZWRcbiAgICAgICAgLy8gaWYoY291bnRlclJvd3Muc29tZShjb3VudCA9PiBjb3VudCAhPT0gOSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gZWxzZSBpZihjb3VudGVyQ29sdW1ucy5zb21lKGNvdW50ID0+IGNvdW50ICE9PSA5KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBkb2Vzbid0IHdvcmsgZm9yIHRoZSBpbmNvcnJlY3Qgb3JkZXIgb2YgbnVtYmVycyBpbiB0aGUgZ3JpZFxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vLyBhIGxpdHRsZSB1bnBsZWFzYW50LCBidXQgYXMgb2YgcmlnaHQgbm93IEkgZG9uJ3Qga25vdyB3aGF0IGVsc2UgdG8gZG8gOi9cbi8vIEBNZSBzdXJlbHkgaXQgY2FuIGJlIHNvbHZlZCBtb3JlIGVsZWdhbnRseSBidXQgXCJkb24ndCBjaGFuZ2UgYSBydW5uaW5nIHN5c3RlbVwiIDpEIFxuY29uc3QgY2hlY2tCb3hlcyA9ICgpOiBib29sZWFuID0+IHtcbiAgICAvLyBmaXJzdCByb3cgb2YgYm94ZXM6XG4gICAgaWYgKGJveENoZWNrSGVscGVyKDAsIDIsIDAsIDIpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcigwLCAyLCAzLCA1KSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoMCwgMiwgNiwgOCkgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIHNlY29uZCByb3cgb2YgYm94ZXM6XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoMywgNSwgMCwgMikgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDMsIDUsIDYsIDgpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcigzLCA1LCAwLCAyKSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gdGhpcmQgcm93IG9mIGJveGVzOlxuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDUsIDgsIDAsIDIpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcig1LCA4LCAzLCA1KSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoNSwgOCwgNSwgOCkgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgcmV0dXJuIHRydWVcbn1cblxuY29uc3QgYm94Q2hlY2tIZWxwZXIgPSAoZnJvbVJvdzogbnVtYmVyLCB0b1JvdzogbnVtYmVyLCBmcm9tQ29sdW1uOiBudW1iZXIsIHRvQ29sdW1uOiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCBnID0gZ2V0Q3VycmVudEdyaWQoKTtcbiAgICBsZXQgY291bnRlciA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgIC8vIGlmIChmcm9tUm93ID09IG51bGwgfHwgZnJvbVJvdyA9PSB1bmRlZmluZWQgfHwgdG9Sb3cgPT0gbnVsbCB8fCB0b1JvdyA9PSB1bmRlZmluZWRcbiAgICAvLyAgICAgfHwgZnJvbUNvbHVtbiA9PSBudWxsIHx8IGZyb21Db2x1bW4gPT0gdW5kZWZpbmVkIHx8IHRvQ29sdW1uID09IG51bGwgfHwgdG9Db2x1bW4gPT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IGZyb21Sb3c7IGkgPD0gdG9Sb3c7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gZnJvbUNvbHVtbjsgaiA8PSB0b0NvbHVtbjsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIucGFyc2VJbnQoZ1tpXVtqXSk7XG4gICAgICAgICAgICBjb3VudGVyW251bS0xXSsrO1xuICAgICAgICAgICAgaWYgKGNvdW50ZXJbbnVtLTFdID4gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgeyBjaGVja0dyaWQsIGNoZWNrUm93c0FuZENvbHVtbnMgfSIsIlxuLy8gZ2V0dGluZyB0aGUgY3VycmVudCBHcmlkIG91dCBvZiBET01cbmNvbnN0IGdldEN1cnJlbnRHcmlkID0gKCk6IHN0cmluZ1tdW10gPT4ge1xuICAgIGxldCBncmlkOiBzdHJpbmdbXVtdID0gW107XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDk7IGkrKykge1xuICAgICAgICBncmlkW2ldID0gbmV3IEFycmF5KDkpLmZpbGwoXCJcIik7XG4gICAgfVxuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgICBpZihjZWxscyA9PT0gbnVsbCkgcmV0dXJuIFtbXCJcIl1dO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPD0gODsgaSsrKSB7XG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPD0gODsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gY2VsbHNbaSo5K2pdOyAvLyBtYXBwcyB0aGUgODEgY2VsbHMgdG8gdGhlIDIgZGltIGFycmF5XG4gICAgICAgICAgICBpZighKHRlbXAgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybiBbW2BgXV07XG4gICAgICAgICAgICBpZighdGVtcCkgcmV0dXJuIFtbXCJcIl1dOyAvLyBjaGVja2luZyBpZiB0ZW1wIGlzIGZhbHN5XG4gICAgICAgICAgICBjb25zdCB0ZW1wTnVtID0gdGVtcC5pbm5lclRleHQ7XG4gICAgICAgICAgICBncmlkW2ldW2pdID0gdGVtcE51bTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ3JpZDtcbn1cblxuZXhwb3J0IHsgZ2V0Q3VycmVudEdyaWQgfSIsImltcG9ydCB7IGNyZWF0ZUJvYXJkIH0gZnJvbSBcIi4vY3JlYXRpbmdHcmlkXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY2xlYXJpbmcgdGhlIEdyaWQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGNyZWF0ZVZvaWRCb2FyZCA9ICgpOiBzdHJpbmdbXVtdID0+IHtcbiAgICBsZXQgZ3JpZDogc3RyaW5nW11bXSA9IFtdO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgZ3JpZFtpXSA9IG5ldyBBcnJheSg5KS5maWxsKFwiXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZ3JpZDtcbn1cblxuY29uc3QgZGVsZXRlQm9hcmQgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBncmlkYCk7XG4gICAgaWYoZ3JpZCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIGdyaWQucmVtb3ZlKCk7XG59XG5cbmNvbnN0IGNsZWFyQm9hcmQgPSAoKTogdm9pZCA9PiB7XG4gICAgZGVsZXRlQm9hcmQoKTtcbiAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XG4gICAgaWYoZ3JpZCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIGdyaWQuaWQgPSBgZ3JpZGA7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoZ3JpZCk7XG4gICAgY3JlYXRlQm9hcmQoY3JlYXRlVm9pZEJvYXJkKCkpO1xufVxuXG5leHBvcnQgeyBjbGVhckJvYXJkIH0iLCJpbXBvcnQgeyB1bmRvU3RhY2sgfSBmcm9tIFwiLi91bmRvXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY3JlYXRpbmcgR3JpZC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNyZWF0aW5nIEdyaWQgd2l0aCBldmVudExpc3RlbmVyIGlucHV0dGluZyBjZWxsc1xuLy8gYSBmdW5jdGlvbiBjcmVhdGluZyBhIDl4OSBncmlkIG9mIHNxdWFyZXNcbmNvbnN0IGNyZWF0ZUJvYXJkID0gKHdpdGhHcmlkOiBzdHJpbmdbXVtdKTogdm9pZCA9PiB7XG4gICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZFwiKTtcbiAgICBpZihncmlkID09PSBudWxsKSByZXR1cm47XG5cbiAgICAvLyBjcmVhdGUgOSByb3dzIGZvciB0aGUgc3Vkb2t1IGdyaWRcbiAgICB3aXRoR3JpZC5mb3JFYWNoKChlbGVtOiBTdHJpbmdbXSwgcm93SW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWYocm93ID09PSBudWxsKSByZXR1cm47XG4gICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdyb3cnKTtcbiAgICAgICAgcm93LnNldEF0dHJpYnV0ZShcInJvd1wiLCBgJHtyb3dJbmRleH1gKTtcbiAgICAgICAgaWYgKHJvd0luZGV4ID09IDIgfHwgcm93SW5kZXggPT0gNSkgcm93LmNsYXNzTGlzdC5hZGQoJ3VuZGVybGluZScpO1xuICAgICAgICBncmlkLmFwcGVuZChyb3cpO1xuXG4gICAgICAgIC8vIGluc2VydCBjZWxscyBpbnRvIGVhY2ggcm93XG4gICAgICAgIGVsZW0uZm9yRWFjaCgodmFsdWU6IFN0cmluZywgY29sSW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpZihjZWxsID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcInJvd1wiLCBgJHtyb3dJbmRleH1gKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJjb2x1bW5cIiwgYCR7Y29sSW5kZXh9YClcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgICAgICAgICBpZiAoY29sSW5kZXggPT0gMiB8fCBjb2xJbmRleCA9PSA1KSBjZWxsLmNsYXNzTGlzdC5hZGQoJ3JpZ2h0bGluZScpO1xuXG4gICAgICAgICAgICAvLyBjb25zdCBjZWxsTnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaWYodmFsdWUudG9TdHJpbmcoKSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGROdW1iZXIpO1xuICAgICAgICAgICAgfSBlbHNlIGNlbGwuaW5uZXJUZXh0ID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcm93LmFwcGVuZChjZWxsKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IGFkZE51bWJlciA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGVsZW0gPSBldmVudC50YXJnZXQ7XG4gICAgaWYgKCEoZWxlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xuICAgIGNvbnN0IHJvdyA9IGVsZW0uZ2V0QXR0cmlidXRlKFwicm93XCIpO1xuICAgIGNvbnN0IGNvbHVtbiA9IGVsZW0uZ2V0QXR0cmlidXRlKFwiY29sdW1uXCIpO1xuICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbcm93PVwiJHtyb3d9XCJdW2NvbHVtbj1cIiR7Y29sdW1ufVwiXWApO1xuICAgIGlmKCEoY2VsbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuO1xuICAgIGxldCBudW06IG51bWJlcjtcbiAgICBkbyB7XG4gICAgICAgIGNvbnN0IHByb210ID0gcHJvbXB0KFwiRW50ZXIgYSBudW1iZXIgYmV0d2VlbiAxIGFuZCA5OlwiKTtcbiAgICAgICAgaWYocHJvbXQgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgbnVtID0gTnVtYmVyLnBhcnNlSW50KHByb210KTtcbiAgICB9IHdoaWxlIChpc05hTihOdW1iZXIobnVtKSkpXG4gICAgaWYgKCFpc05hTihOdW1iZXIobnVtKSkgJiYgY2VsbCAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgbnVtYmVyQmVmb3JlQ2hhbmdlOiBudW1iZXI7XG4gICAgICAgIGlmKGNlbGwuaW5uZXJIVE1MID09PSBgYCkgbnVtYmVyQmVmb3JlQ2hhbmdlID0gMDtcbiAgICAgICAgZWxzZSBudW1iZXJCZWZvcmVDaGFuZ2UgPSBOdW1iZXIucGFyc2VJbnQoY2VsbC5pbm5lckhUTUwpO1xuICAgICAgICBjZWxsLmlubmVyVGV4dCA9IG51bS50b1N0cmluZygpO1xuICAgICAgICB1bmRvU3RhY2sucHVzaChbTnVtYmVyLnBhcnNlSW50KHJvdyksIE51bWJlci5wYXJzZUludChjb2x1bW4pLCBudW1iZXJCZWZvcmVDaGFuZ2VdKVxuICAgIH1cbn1cblxuZXhwb3J0IHsgY3JlYXRlQm9hcmQgfSIsIi8qKlxuICogdW5kbyBpcyBpbXBsZW1lbnRlZCBieSBhIHN0YWNrIHRoYXQgd2lsbCBiZSBwdXNoZWQgKEtvb3JkaW5hdGVzLCBOdW1iZXIpIFxuICogd2hlbiBhIG51bWJlciBnZXRzIGFkZGVkIHRvIHRoZSBncmlkXG4gKiB0aGUgc3RhY2sgd2lsbCBiZSBwb3BwZWQgd2hlbjogdGhlIHVuZG8gYnV0dG9uIGlzIHByZXNzZWRcbiAqIC0tPiB0aGUgc3RhY2sgbXVzdCBiZSBnbG9iYWwgb2Ygc29tZSBraW5kXG4gKi9cblxuaW50ZXJmYWNlIElTdGFjazxUPiB7XG4gICAgcHVzaChpdGVtOiBUKTogdm9pZDtcbiAgICBwb3AoKTogVCB8IHVuZGVmaW5lZDtcbiAgICBwZWVrKCk6IFQgfCB1bmRlZmluZWQ7XG4gICAgc2l6ZSgpOiBUIHwgbnVtYmVyO1xufVxuXG5hYnN0cmFjdCBjbGFzcyBDb2xsZWN0aW9uPFQ+IHtcbiAgICBwcm90ZWN0ZWQgc3RvcmFnZTogVFtdID0gW107XG4gIFxuICAgIHNpemUoKTogbnVtYmVyIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2UubGVuZ3RoO1xuICAgIH1cbiAgICBhYnN0cmFjdCBpc0Z1bGwoKTogYm9vbGVhbjtcbiAgfVxuXG4gIGNsYXNzIFN0YWNrQ29sbGVjdGlvbjxUPiBleHRlbmRzIENvbGxlY3Rpb248VD4gaW1wbGVtZW50cyBJU3RhY2s8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FwYWNpdHk6IG51bWJlciA9IEluZmluaXR5KSB7XG4gICAgICBzdXBlcigpO1xuICAgIH1cbiAgXG4gICAgcHVzaChpdGVtOiBUKSB7XG4gICAgICBpZiAodGhpcy5pc0Z1bGwoKSkge1xuICAgICAgICB0aHJvdyBFcnJvcihcIlN0YWNrIGhhcyByZWFjaGVkIG1heCBjYXBhY2l0eSwgeW91IGNhbm5vdCBhZGQgbW9yZSBpdGVtc1wiKTtcbiAgICAgIH1cbiAgICAgIC8vIEluIHRoZSBkZXJpdmVkIGNsYXNzLCB3ZSBjYW4gYWNjZXNzIHByb3RlY3RlZCBwcm9wZXJ0aWVzIG9mIHRoZSBhYnN0cmFjdCBjbGFzc1xuICAgICAgdGhpcy5zdG9yYWdlLnB1c2goaXRlbSk7XG4gICAgfVxuICBcbiAgICBwb3AoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yYWdlLnBvcCgpO1xuICAgIH1cbiAgXG4gICAgcGVlaygpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VbdGhpcy5zaXplKCkgLSAxXTtcbiAgICB9XG4gIFxuICAgIC8vIEltcGxlbWVudGF0aW9uIG9mIHRoZSBhYnN0cmFjdCBtZXRob2RcbiAgICBpc0Z1bGwoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5jYXBhY2l0eSA9PT0gdGhpcy5zaXplKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGEgU3RhY2sgQ29sbGVjdGlvbiBmaWxsZWQgd2l0aCBhIDIgZGltIG51bWJlciBBcnJheTpcbiAgICogZS5nOiBpbiB0aGUgZ3JpZCB0aGUgY2VsbCBpbiByb3cgMywgY29sdW1uIDUgZ2V0cyB1cGRhdGVkIHRvIDc6XG4gICAqIHN0YWNrRm9yVW5kby5wdXNoKFszLDUsMF0pIC0tPiBpbiB0aGUgY3JlYXRpbmdHcmlkLmFkZE51bWJlcigpXG4gICAqIDAgc2F5cyBpbiB0aGlzIGNhc2UsIHRoYXQgb25lIHN0ZXAgYmVmb3JlIHRoZSBjZWxsIHdhcyBub3QgZmlsbGVkXG4gICAqIElmIHRoZSB1bmRvIGJ1dHRvbiBpcyBwcmVzc2VkIHRoZSBpbm5lclRleHQgaHRtbCBvZiB0aGUgY2VsbCBpbiByb3cgMywgY29sdW1uIDUgd2lsbCBiZSBzZXQgdG8gemVyby5cbiAgICogLi4uYW5kOiBzdGFja0ZvclVuZG8ucG9wKCkgLS0+IGluIHRoZSBjcmVhdGluZ0dyaWQuYWRkTnVtYmVyKClcbiAgICovXG4gIGNvbnN0IHVuZG9TdGFjayA9IG5ldyBTdGFja0NvbGxlY3Rpb248bnVtYmVyW10+KCk7XG5cbiAgY29uc3QgdW5kb1N0ZXAgPSAoKTogc3RyaW5nID0+IHtcbiAgICBpZih1bmRvU3RhY2sucGVlaygpID09PSBudWxsIHx8IHVuZG9TdGFjay5wZWVrKCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBzdHIgPSBgdW5kb1N0YWNrIGlzIG51bGwgb3IgdW5kZWZpbmVkYDtcbiAgICAgICAgYWxlcnQoc3RyKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9IGVsc2UgaWYodW5kb1N0YWNrLnNpemUoKSA9PT0gMCkge1xuICAgICAgICBjb25zdCBzdHIgPSBgdGhlIHVuZG9TdGFjayBpcyBub3QgeWV0IGJ1aWx0YDtcbiAgICAgICAgYWxlcnQoc3RyKTtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgY29uc3QgYXJyID0gdW5kb1N0YWNrLnBvcCgpO1xuICAgIGlmKGFyci5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgY29uc3Qgc3RyID0gYHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggZmV0Y2hpbmcgYW4gdW5kb1N0YWNrLWVsZW1lbnRgO1xuICAgICAgICBhbGVydChzdHIpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW3Jvdz1cIiR7YXJyWzBdfVwiXVtjb2x1bW49XCIke2FyclsxXX1cIl1gKTtcbiAgICBjb25zb2xlLmxvZyhgdW5kaWQgcm93ICR7YXJyWzBdKzF9IGNvbHVtbiAke2FyclsxXSsxfSBmcm9tICR7Y2VsbC5pbm5lckhUTUx9IHRvICR7YXJyWzJdfWApO1xuICAgIGlmKGFyclsyXSA9PT0gMCkgY2VsbC5pbm5lckhUTUwgPSBgYDtcbiAgICBlbHNlIGNlbGwuaW5uZXJIVE1MID0gYXJyWzJdLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIGBnb29kIHdvcmsgbWF0ZWA7XG4gIH1cblxuXG5leHBvcnR7IHVuZG9TdGFjaywgdW5kb1N0ZXAgfSIsIi8vIG1heWJlOiBnZXR0aW5nIGEgcmFuZG9tIGdyaWQgZnJvbSBhIERCIGxhdGVyIChteSBvd24gb3IgYSBwdWJsaWMpXG4vLyBlZGl0OiBybHkgbmVjZXNzYXJ5P1xuY29uc3QgdGVzdEdyaWQ6IHN0cmluZ1tdW10gPSBbXG4gICAgW1wiXCIsIFwiNVwiLCBcIlwiLCBcIlwiLCBcIjNcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgW1wiXCIsIFwiNlwiLCBcIjlcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCI1XCIsIFwiXCIsIFwiMVwiXSxcbiAgICBbXCJcIiwgXCJcIiwgXCI3XCIsIFwiOVwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIjRcIiwgXCI4XCJdLFxuXG4gICAgW1wiN1wiLCBcIjlcIiwgXCJcIiwgXCIxXCIsIFwiXCIsIFwiNVwiLCBcIjZcIiwgXCI4XCIsIFwiMlwiXSxcbiAgICBbXCI0XCIsIFwiMlwiLCBcIlwiLCBcIjNcIiwgXCI4XCIsIFwiOVwiLCBcIjdcIiwgXCJcIiwgXCI1XCJdLFxuICAgIFtcIjFcIiwgXCI4XCIsIFwiXCIsIFwiXCIsIFwiNlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcblxuICAgIFtcIlwiLCBcIlwiLCBcIjhcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCI0XCIsIFwiXCIsIFwiXCJdLFxuICAgIFtcIlwiLCBcIjdcIiwgXCJcIiwgXCI1XCIsIFwiXCIsIFwiNFwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCI3XCIsIFwiM1wiLCBcIlwiLCBcIjVcIiwgXCI2XCJdXG5dO1xuY29uc3QgdGVzdEdyaWRGaWxsZWRSaWdodDogc3RyaW5nW11bXSA9IFtcbiAgICBbXCI4XCIsIFwiNVwiLCBcIjRcIiwgXCI3XCIsIFwiM1wiLCBcIjFcIiwgXCIyXCIsIFwiNlwiLCBcIjlcIl0sXG4gICAgW1wiM1wiLCBcIjZcIiwgXCI5XCIsIFwiNFwiLCBcIjJcIiwgXCI4XCIsIFwiNVwiLCBcIjdcIiwgXCIxXCJdLFxuICAgIFtcIjJcIiwgXCIxXCIsIFwiN1wiLCBcIjlcIiwgXCI1XCIsIFwiNlwiLCBcIjNcIiwgXCI0XCIsIFwiOFwiXSxcblxuICAgIFtcIjdcIiwgXCI5XCIsIFwiM1wiLCBcIjFcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI4XCIsIFwiMlwiXSxcbiAgICBbXCI0XCIsIFwiMlwiLCBcIjZcIiwgXCIzXCIsIFwiOFwiLCBcIjlcIiwgXCI3XCIsIFwiMVwiLCBcIjVcIl0sXG4gICAgW1wiMVwiLCBcIjhcIiwgXCI1XCIsIFwiMlwiLCBcIjZcIiwgXCI3XCIsIFwiOVwiLCBcIjNcIiwgXCI0XCJdLFxuXG4gICAgW1wiNVwiLCBcIjNcIiwgXCI4XCIsIFwiNlwiLCBcIjFcIiwgXCIyXCIsIFwiNFwiLCBcIjlcIiwgXCI3XCJdLFxuICAgIFtcIjZcIiwgXCI3XCIsIFwiMVwiLCBcIjVcIiwgXCI5XCIsIFwiNFwiLCBcIjhcIiwgXCIyXCIsIFwiM1wiXSxcbiAgICBbXCI5XCIsIFwiNFwiLCBcIjJcIiwgXCI4XCIsIFwiN1wiLCBcIjNcIiwgXCIxXCIsIFwiNVwiLCBcIjZcIl1cbl07XG5jb25zdCB0ZXN0R3JpZEZpbGxlZFdyb25nOiBzdHJpbmdbXVtdID0gW1xuICAgIFtcIjVcIiwgXCI4XCIsIFwiNFwiLCBcIjdcIiwgXCIzXCIsIFwiMVwiLCBcIjJcIiwgXCI2XCIsIFwiOVwiXSxcbiAgICBbXCIzXCIsIFwiNlwiLCBcIjlcIiwgXCI0XCIsIFwiMlwiLCBcIjhcIiwgXCI1XCIsIFwiN1wiLCBcIjFcIl0sXG4gICAgW1wiMlwiLCBcIjFcIiwgXCI3XCIsIFwiOVwiLCBcIjVcIiwgXCI2XCIsIFwiM1wiLCBcIjRcIiwgXCI4XCJdLFxuXG4gICAgW1wiN1wiLCBcIjlcIiwgXCIzXCIsIFwiMVwiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjhcIiwgXCIyXCJdLFxuICAgIFtcIjRcIiwgXCIyXCIsIFwiNlwiLCBcIjNcIiwgXCI4XCIsIFwiOVwiLCBcIjdcIiwgXCIxXCIsIFwiNVwiXSxcbiAgICBbXCIxXCIsIFwiOFwiLCBcIjVcIiwgXCIyXCIsIFwiNlwiLCBcIjdcIiwgXCI5XCIsIFwiM1wiLCBcIjRcIl0sXG5cbiAgICBbXCI1XCIsIFwiM1wiLCBcIjhcIiwgXCI2XCIsIFwiMVwiLCBcIjJcIiwgXCI0XCIsIFwiOVwiLCBcIjdcIl0sXG4gICAgW1wiNlwiLCBcIjdcIiwgXCIxXCIsIFwiNVwiLCBcIjlcIiwgXCI0XCIsIFwiOFwiLCBcIjJcIiwgXCIzXCJdLFxuICAgIFtcIjlcIiwgXCI0XCIsIFwiMlwiLCBcIjhcIiwgXCI3XCIsIFwiM1wiLCBcIjFcIiwgXCI1XCIsIFwiNlwiXVxuXTtcblxuZXhwb3J0e1xuICAgIHRlc3RHcmlkLFxuICAgIHRlc3RHcmlkRmlsbGVkUmlnaHQsXG4gICAgdGVzdEdyaWRGaWxsZWRXcm9uZ1xufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyBjaGVja0dyaWQgfSBmcm9tIFwiLi9DaGVja2luZ0dyaWQvY2hlY2tpbmdHcmlkXCI7XG5pbXBvcnQgeyBjcmVhdGVCb2FyZCB9IGZyb20gXCIuL01hbmFnaW5nR3JpZC9jcmVhdGluZ0dyaWRcIjtcbmltcG9ydCB7IGNsZWFyQm9hcmQgfSBmcm9tIFwiLi9NYW5hZ2luZ0dyaWQvY2xlYXJpbmdHcmlkXCI7XG5pbXBvcnQgeyB1bmRvU3RlcCB9IGZyb20gXCIuL01hbmFnaW5nR3JpZC91bmRvXCI7XG5pbXBvcnQgKiBhcyBSYW5kb21HcmlkIGZyb20gXCIuL1JlcG9zaXRvcnkvZ2V0dGluZ1JhbmRvbUdyaWRcIjtcbmltcG9ydCAqIGFzIFJlcG8gZnJvbSBcIi4vUmVwb3NpdG9yeS9zdWRva3VUZXN0R3JpZFwiXG4vLyBpbXBvcnQgeyBnZXRDdXJyZW50R3JpZCB9IGZyb20gXCIuL0dldHRlci9nZXRHcmlkXCI7XG5cbi8vIGRlYnVnZ2VyOyBcbi8vIGxpbnQ7IHpvZDsgcHJldHRpZXIgbGlicyBcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWJ1dHRvbnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGNsZWFyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGNsZWFyYCk7XG5pZihjbGVhckJ1dHRvbiAhPT0gbnVsbCkgY2xlYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBjbGVhckJvYXJkKTtcbmVsc2UgYWxlcnQoYHdlJ3ZlIGdvdCBhIHByb2JsZW0gd2l0aCB0aGUgY2hlY2sgYnV0dG9uIDovYCk7XG5cbmNvbnN0IGNoZWNrZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoZWNrXCIpO1xuaWYoY2hlY2tlckJ1dHRvbiAhPT0gbnVsbCkgY2hlY2tlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hlY2tHcmlkKTtcbmVsc2UgYWxlcnQoYHdlJ3ZlIGdvdCBhIHByb2JsZW0gd2l0aCB0aGUgY2hlY2sgYnV0dG9uYCk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcInpcIiAmJiBlLmN0cmxLZXkgPT09IHRydWUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBFeGVjdXRlIFVuZG8gZnVuY3Rpb24gd2hlbiBzdHJnK3UgaXMgcHJlc3NlZFxuICAgICAgICB1bmRvU3RlcCgpO1xuICAgIH1cbn0pO1xuXG5jb25zdCB1bmRvQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHVuZG9gKTtcbmlmKHVuZG9CdXR0b24gIT09IG51bGwpIHtcbiAgICB1bmRvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB1bmRvU3RlcCk7XG4gICAgXG4gICAgICBcbn1cbmVsc2UgYWxlcnQoYHdlJ3ZlIGdvdCBhIHByb2JsZW0gd2l0aCB0aGUgdW5kbyBidXR0b25gKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZXhlY3V0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIGNyZWF0ZUJvYXJkKFJhbmRvbUdyaWQuZ2V0UmFuZG9tSGFyZEdyaWQoKSk7XG4vLyBjcmVhdGVCb2FyZChSYW5kb21HcmlkLmdldFJhbmRvbU1lZGl1bUdyaWQoKSk7XG4vLyBjcmVhdGVCb2FyZChSYW5kb21HcmlkLmdldFJhbmRvbUVhc3lHcmlkKCkpO1xuY3JlYXRlQm9hcmQoUmVwby50ZXN0R3JpZCk7Il0sIm5hbWVzIjpbImNoZWNrR3JpZCIsIm91dHB1dCIsImciLCJnZXRDdXJyZW50R3JpZCIsImFsZXJ0IiwiZ3JpZElzRnVsbCIsImNoZWNrUm93c0FuZENvbHVtbnMiLCJjaGVja0JveGVzIiwiaSIsImoiLCJjb3VudGVyUm93cyIsIkFycmF5IiwiZmlsbCIsImNvdW50ZXJDb2x1bW5zIiwibnVtUm93IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJudW1Db2wiLCJib3hDaGVja0hlbHBlciIsImZyb21Sb3ciLCJ0b1JvdyIsImZyb21Db2x1bW4iLCJ0b0NvbHVtbiIsImNvdW50ZXIiLCJudW0iLCJncmlkIiwiY2VsbHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0ZW1wIiwiSFRNTEVsZW1lbnQiLCJ0ZW1wTnVtIiwiaW5uZXJUZXh0IiwiY2xlYXJCb2FyZCIsImdldEVsZW1lbnRCeUlkIiwicmVtb3ZlIiwiZGVsZXRlQm9hcmQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJib2R5IiwiYXBwZW5kIiwiY3JlYXRlQm9hcmQiLCJjcmVhdGVWb2lkQm9hcmQiLCJ3aXRoR3JpZCIsImZvckVhY2giLCJlbGVtIiwicm93SW5kZXgiLCJyb3ciLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsImNvbEluZGV4IiwiY2VsbCIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZE51bWJlciIsImV2ZW50IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiY29sdW1uIiwicXVlcnlTZWxlY3RvciIsInByb210IiwicHJvbXB0IiwiaXNOYU4iLCJudW1iZXJCZWZvcmVDaGFuZ2UiLCJpbm5lckhUTUwiLCJ1bmRvU3RhY2siLCJwdXNoIiwiY2FwYWNpdHkiLCJpdGVtIiwidGhpcyIsImlzRnVsbCIsIkVycm9yIiwic3RvcmFnZSIsInBvcCIsInBlZWsiLCJzaXplIiwibGVuZ3RoIiwidW5kb1N0ZXAiLCJ1bmRlZmluZWQiLCJzdHIiLCJhcnIiLCJjb25zb2xlIiwibG9nIiwidGVzdEdyaWQiLCJ0ZXN0R3JpZEZpbGxlZFJpZ2h0IiwidGVzdEdyaWRGaWxsZWRXcm9uZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsImNsZWFyQnV0dG9uIiwiY2hlY2tlckJ1dHRvbiIsIndpbmRvdyIsImUiLCJrZXkiLCJjdHJsS2V5IiwicHJldmVudERlZmF1bHQiLCJ1bmRvQnV0dG9uIiwiUmVwbyJdLCJzb3VyY2VSb290IjoiIn0=