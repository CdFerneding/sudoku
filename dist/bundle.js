(()=>{"use strict";var e={346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;class l{constructor(e=null,t=null,l=null,r=0){this.row=e,this.column=t,this.box=null===e||null===t?null:3*Math.floor(this.row/3)+Math.floor(this.column/3),this.value=r,this.possibleValues=l}getRow(){return this.row}getColumn(){return this.column}getBox(){return this.box}getPossibleValues(){return this.possibleValues}getValue(){return this.value}setValue(e){this.value=e}setPossibleValues(e){this.possibleValues=e}clone(){return new l(this.row,this.column,[...this.possibleValues],this.value)}copy(){const e=new l;return e.row=this.row,e.column=this.column,e.box=this.box,e.value=this.value,e.possibleValues=[...this.possibleValues],e}removePossibleValue(e){const t=this.possibleValues.indexOf(e);t>-1&&this.possibleValues.splice(t,1)}isEmpty(){return 0===this.value||null===this.value}equals(e){return this.row===e.getRow()&&this.column===e.getColumn()&&this.box===e.getBox()&&this.value===e.getValue()&&function(e,t){if(e.length!==t.length)return!1;for(let l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}(this.possibleValues,e.getPossibleValues())}}t.Cell=l},393:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;const r=l(346);class o{constructor(e,t){if(this.cells=[],t){const e=t;for(const t of e){const e=t.copy();this.cells.push(e)}}else for(let t=0;t<9;t++)for(let l=0;l<9;l++){const o=e[t][l],s=new r.Cell(t,l,0!==o?[]:[1,2,3,4,5,6,7,8,9],0!==o?o:0);this.cells.push(s)}}copy(){const e=this.toNumberArray();return new o(e,this.cells)}equals(e){const t=this.getCells(),l=e.getCells();for(let e=0;e<t.length;e++)if(!t[e].equals(l[e]))return!1;return!0}getCells(){return this.cells}getCell(e,t){for(let l=0;l<9;l++)for(let r=0;r<9;r++)if(l===e&&r===t)return this.cells[9*l+r]}toNumberArray(){const e=[];for(let t=0;t<9;t++){const l=[];for(let e=0;e<9;e++){const r=this.getCell(t,e);l.push(r.getValue())}e.push(l)}return e}isFull(){return this.cells.every((e=>0!==e.getValue()))}}t.Grid=o},12:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentGrid=void 0,t.getCurrentGrid=()=>{let e=[];for(let t=0;t<9;t++)e[t]=new Array(9).fill(null);const t=document.querySelectorAll(".cell");if(null==t)return null;for(let l=0;l<=8;l++)for(let r=0;r<=8;r++){const o=t[9*l+r];if(!(o instanceof HTMLElement))return null;if(!o)return null;const s=o.innerText;e[l][r]=Number(s)}return e}},945:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBoard=void 0;const r=l(410);t.createBoard=e=>{const t=document.getElementById("grid");null!=t&&e.forEach(((e,l)=>{const r=document.createElement("div");null!==r&&(r.classList.add("row"),r.setAttribute("row",`${l}`),2!==l&&5!==l||r.classList.add("underline"),t.append(r),e.forEach(((e,t)=>{const s=document.createElement("div");null!==s&&(s.setAttribute("row",`${l}`),s.setAttribute("column",`${t}`),s.classList.add("cell"),2!=t&&5!=t||s.classList.add("rightline"),null===e||0===e?(s.setAttribute("type","button"),s.addEventListener("click",o)):s.innerText=e.toString(),r.append(s))})))}))};const o=e=>{const t=e.target;if(!(t instanceof HTMLElement))return;const l=t.getAttribute("row"),o=t.getAttribute("column"),s=document.querySelector(`[row="${l}"][column="${o}"]`);if(!(s instanceof HTMLElement))return;let n;do{const e=prompt("Enter a number between 1 and 9:");if(null===e)return;n=Number.parseInt(e)}while(isNaN(Number(n)));if(!isNaN(Number(n))&&null!==s){let e;e=""===s.innerHTML?0:Number.parseInt(s.innerHTML),s.innerText=n.toString(),r.undoStack.push([Number.parseInt(l),Number.parseInt(o),e])}}},314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.easyGrid2=t.easyGrid1=t.numOfEasyGrids=void 0,t.numOfEasyGrids=2,t.easyGrid1=[[8,2,7,3,0,0,0,4,9],[6,4,9,0,5,0,8,3,0],[0,0,0,4,8,9,6,0,0],[0,0,0,6,0,1,2,0,0],[2,1,0,0,0,7,0,0,6],[4,9,0,0,0,0,1,5,7],[1,8,0,0,2,4,7,0,0],[0,0,0,0,7,3,0,0,0],[3,0,4,1,0,0,0,0,0]],t.easyGrid2=[[4,9,0,8,0,0,5,1,0],[0,1,8,0,5,0,0,0,6],[0,0,0,0,6,9,0,0,4],[0,0,5,0,0,0,6,0,0],[0,7,4,5,0,6,2,9,0],[9,0,0,3,0,0,1,4,5],[5,0,0,9,4,0,0,6,0],[0,0,9,2,7,5,0,0,0],[8,2,7,0,3,1,0,0,0]]},380:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hardGrid2=t.hardGrid1=t.numOfHardrids=void 0,t.numOfHardrids=2,t.hardGrid1=[[0,8,9,3,7,0,0,4,0],[3,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,2,0,0],[0,0,0,0,0,8,0,0,4],[0,7,6,0,9,0,0,8,0],[0,5,0,0,0,0,0,0,0],[5,0,0,0,0,0,0,6,0],[4,0,0,0,3,0,0,0,0],[0,6,3,7,0,0,0,0,1]],t.hardGrid2=[[0,0,8,1,0,0,5,0,0],[7,0,0,9,0,0,0,0,0],[0,0,4,0,5,7,0,6,0],[2,0,0,0,4,5,8,0,0],[0,8,0,0,0,0,0,9,0],[0,0,0,0,1,0,0,0,0],[0,0,0,7,0,0,0,0,0],[4,0,0,0,8,2,9,0,0],[0,0,6,0,0,0,0,0,3]]},427:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mediumGrid2=t.mediumGrid1=t.numOfMediumGrids=void 0,t.numOfMediumGrids=2,t.mediumGrid1=[[9,0,0,0,0,4,0,0,0],[0,0,5,0,0,0,0,6,0],[0,7,0,0,1,2,0,0,5],[0,0,0,8,0,0,0,0,0],[3,0,0,0,0,0,9,0,0],[0,2,0,0,7,5,0,0,6],[2,0,0,0,8,1,0,3,0],[0,0,0,4,0,0,0,0,1],[0,8,0,6,0,0,0,0,0]],t.mediumGrid2=[[5,0,0,2,0,0,0,4,0],[6,0,0,0,3,0,0,0,2],[0,0,0,0,0,0,3,0,1],[0,8,0,0,4,0,9,1,0],[0,1,0,3,0,0,0,0,0],[0,9,0,7,0,0,0,6,0],[0,6,0,0,0,8,0,2,0],[7,0,0,4,0,0,0,9,0],[0,0,0,0,0,0,0,0,0]]},610:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomHardGrid=t.getRandomMediumGrid=t.getRandomEasyGrid=void 0;const r=l(314),o=l(380),s=l(427);t.getRandomEasyGrid=()=>{const e=Math.floor(100*Math.random()%r.numOfEasyGrids)+1;return r[`easyGrid${e}`]},t.getRandomMediumGrid=()=>{const e=Math.floor(100*Math.random()%s.numOfMediumGrids)+1;return s[`mediumGrid${e}`]},t.getRandomHardGrid=()=>{const e=Math.floor(100*Math.random()%o.numOfHardrids)+1;return o[`hardGrid${e}`]}},38:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkRowsAndColumns=t.checkGrid=void 0;const r=l(12);t.checkGrid=()=>{let e;return null==(0,r.getCurrentGrid)()?(e="something went wrong with fetching the grid :S",alert(e),e):!0!==o()?(e="the grid is not fully filled :S",alert(e),e):!0!==s()&&!0!==n()?(e="the grid is incorrect :S",alert(e),e):(e="the grid is correct :D. Well done!",alert(e),e)};const o=()=>{const e=(0,r.getCurrentGrid)();for(let t=0;t<9;t++)for(let l=0;l<9;l++)if(null==e[t][l])return!1;return!0},s=()=>{const e=(0,r.getCurrentGrid)();let t=new Array(9).fill(0),l=new Array(9).fill(0);for(let r=0;r<9;r++){t.fill(0),l.fill(0);for(let o=0;o<9;o++){const s=e[r][o],n=e[o][r];if(t[s-1]++,l[n-1]++,1!=t[s-1])return!1;if(1!=l[n-1])return!1}}return!0};t.checkRowsAndColumns=s;const n=()=>1==i(0,2,0,2)&&1==i(0,2,3,5)&&1==i(0,2,6,8)&&1==i(3,5,0,2)&&1==i(3,5,6,8)&&1==i(3,5,0,2)&&1==i(5,8,0,2)&&1==i(5,8,3,5)&&1==i(5,8,5,8),i=(e,t,l,o)=>{const s=(0,r.getCurrentGrid)();let n=new Array(9).fill(0);for(let r=e;r<=t;r++)for(let e=l;e<=o;e++){const t=s[r][e];if(n[t-1]++,n[t-1]>1)return!1}return!0}},296:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBoard=t.clearBoard=void 0;const r=l(945),o=()=>{const e=document.getElementById("grid");if(null!==e)for(;e.lastChild;)e.removeChild(e.lastChild)};t.deleteBoard=o,t.clearBoard=()=>{o(),(0,r.createBoard)((()=>{let e=[];for(let t=0;t<9;t++)e[t]=new Array(9).fill(null);return e})())}},10:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.solveGrid=void 0;const r=l(12),o=l(296),s=l(945),n=l(393),i=l(828);t.solveGrid=()=>{console.log("the solve button was pressed.");const e=(0,r.getCurrentGrid)(),t=new n.Grid(e),l=(0,i.solveSudoku)(t).toNumberArray();(0,o.deleteBoard)(),(0,s.createBoard)(l)}},410:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.undoStep=t.undoStack=void 0;class l{constructor(){this.storage=[]}size(){return this.storage.length}}const r=new class extends l{constructor(e=1/0){super(),this.capacity=e}push(e){if(this.isFull())throw Error("Stack has reached max capacity, you cannot add more items");this.storage.push(e)}pop(){return this.storage.pop()}peek(){return this.storage[this.size()-1]}isFull(){return this.capacity===this.size()}};t.undoStack=r,t.undoStep=()=>{if(null===r.peek()||void 0===r.peek()){const e="undoStack is null or undefined";return alert(e),e}if(0===r.size()){const e="the undoStack is not yet built";return alert(e),e}const e=r.pop();if(3!==e.length){const e="something went wrong with fetching an undoStack-element";return alert(e),e}const t=document.querySelector(`[row="${e[0]}"][column="${e[1]}"]`);return console.log(`undid row ${e[0]+1} column ${e[1]+1} from ${t.innerHTML} to ${e[2]}`),0===e[2]?t.innerHTML="":t.innerHTML=e[2].toString(),"good work mate"}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyNakedSingle=void 0,t.applyNakedSingle=e=>(e.getCells().forEach((function(e){1===e.getPossibleValues().length&&(e.setValue(e.getPossibleValues()[0]),e.setPossibleValues([]))})),e)},412:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyHiddenSingle=void 0,t.applyHiddenSingle=e=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++){const r=e.getCell(t,l);if(!r.isEmpty())continue;let o=!1,s=[];for(let r=0;r<9;r++){const o=e.getCell(t,r);r!==l&&o.isEmpty()&&o.getPossibleValues().forEach((e=>{s.includes(e)||s.push(e)}))}if(r.getPossibleValues().forEach((e=>{s.includes(e)||(r.setValue(e),r.setPossibleValues([]),o=!0)})),o)return e;o=!1;let n=[];for(let r=0;r<9;r++){const o=e.getCell(r,l);r!==t&&o.isEmpty()&&o.getPossibleValues().forEach((e=>{n.includes(e)||n.push(e)}))}if(r.getPossibleValues().forEach((e=>{n.includes(e)||(r.setValue(e),r.setPossibleValues([]),o=!0)})),o)return e;const i=3*Math.floor(t/3),u=3*Math.floor(l/3);let d=[];for(let r=i;r<i+3;r++)for(let o=u;o<u+3;o++){const s=e.getCell(r,o);r===t&&o===l||!s.isEmpty()||s.getPossibleValues().forEach((e=>{d.includes(e)||d.push(e)}))}if(r.getPossibleValues().forEach((e=>{d.includes(e)||(r.setValue(e),r.setPossibleValues([]),o=!0)})),o)return e}return e}},517:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applySudokuRules=void 0,t.applySudokuRules=e=>(e.getCells().forEach((t=>{if(0!==t.getValue())return;const l=t.getRow(),r=t.getColumn(),o=t.getBox(),s=t.getPossibleValues();for(let o=0;o<9;o++){const n=e.getCell(l,o).getValue();o!==r&&null!==n&&s.includes(n)&&t.removePossibleValue(n)}for(let o=0;o<9;o++){const n=e.getCell(o,r).getValue();o!==l&&null!==n&&s.includes(n)&&t.removePossibleValue(n)}const n=3*Math.floor(o/3),i=o%3*3;for(let o=n;o<n+3;o++)for(let n=i;n<i+3;n++){const i=e.getCell(o,n).getValue();o===l&&n===r||null===i||!s.includes(i)||t.removePossibleValue(i)}t.setPossibleValues(s)})),e)},828:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.solveSudoku=void 0;const r=l(412),o=l(517),s=l(194);t.solveSudoku=e=>{console.log("inside 'solveSudoku' method.");let t=!1,l=0;do{let n;t=!1;do{t=!1,n=e.copy(),e=(0,o.applySudokuRules)(e),console.log(!e.equals(n)),e.equals(n)||(t=!0),n=e.copy(),(e=(0,s.applyNakedSingle)(e)).equals(n)||(t=!0)}while(!e.isFull()&&t);n=e.copy(),(e=(0,r.applyHiddenSingle)(e)).equals(n)||(t=!0),n=e.copy(),l++}while(!e.isFull()&&t&&l<=10);return e}}},t={};function l(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,l),s.exports}(()=>{const e=l(38),t=l(945),r=l(296),o=l(410),s=l(610),n=l(10),i=document.getElementById("clear");null!==i?i.addEventListener("click",r.clearBoard):alert("we've got a problem with the check button :/");const u=document.getElementById("check");null!==u?u.addEventListener("click",e.checkGrid):alert("we've got a problem with the check button"),window.addEventListener("keydown",(function(e){"z"===e.key&&!0===e.ctrlKey&&(e.preventDefault(),(0,o.undoStep)())}));const d=document.getElementById("undo");null!==d?d.addEventListener("click",o.undoStep):alert("we've got a problem with the undo button");const a=document.getElementById("solve");null!==a||void 0!==a?a.addEventListener("click",n.solveGrid):alert("we've got a problem with the undo button"),(0,t.createBoard)(s.getRandomHardGrid())})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJxR0FBQSxNQUFNQSxFQU9MQyxZQUFZQyxFQUFjLEtBQU1DLEVBQWlCLEtBQU1DLEVBQTRCLEtBQU1DLEVBQWdCLEdBQ3hHQyxLQUFLSixJQUFNQSxFQUNYSSxLQUFLSCxPQUFTQSxFQUV1QkcsS0FBS0MsSUFBOUIsT0FBUkwsR0FBMkIsT0FBWEMsRUFBNEIsS0FDTCxFQUEzQkssS0FBS0MsTUFBTUgsS0FBS0osSUFBTSxHQUFTTSxLQUFLQyxNQUFNSCxLQUFLSCxPQUFTLEdBQ3hFRyxLQUFLRCxNQUFRQSxFQUNiQyxLQUFLSSxlQUFpQk4sQ0FDdkIsQ0FFT08sU0FBVyxPQUFPTCxLQUFLSixHQUFJLENBQzNCVSxZQUFjLE9BQU9OLEtBQUtILE1BQU8sQ0FDakNVLFNBQVcsT0FBT1AsS0FBS0MsR0FBSSxDQUMzQk8sb0JBQWdDLE9BQU9SLEtBQUtJLGNBQWUsQ0FDM0RLLFdBQWEsT0FBT1QsS0FBS0QsS0FBTyxDQUVoQ1csU0FBU1gsR0FBaUJDLEtBQUtELE1BQVFBLENBQU0sQ0FDN0NZLGtCQUFrQmIsR0FBNkJFLEtBQUtJLGVBQWlCTixDQUFnQixDQUVyRmMsUUFFTixPQURtQixJQUFJbEIsRUFBS00sS0FBS0osSUFBS0ksS0FBS0gsT0FBUSxJQUFJRyxLQUFLSSxnQkFBaUJKLEtBQUtELE1BRW5GLENBRU9jLE9BQ04sTUFBTUMsRUFBYSxJQUFJcEIsRUFNdkIsT0FMQW9CLEVBQVdsQixJQUFNSSxLQUFLSixJQUN0QmtCLEVBQVdqQixPQUFTRyxLQUFLSCxPQUN6QmlCLEVBQVdiLElBQU1ELEtBQUtDLElBQ3RCYSxFQUFXZixNQUFRQyxLQUFLRCxNQUN4QmUsRUFBV1YsZUFBaUIsSUFBSUosS0FBS0ksZ0JBQzlCVSxDQUNSLENBRU9DLG9CQUFvQmhCLEdBQzFCLE1BQU1pQixFQUFRaEIsS0FBS0ksZUFBZWEsUUFBUWxCLEdBQ3RDaUIsR0FBUyxHQUNaaEIsS0FBS0ksZUFBZWMsT0FBT0YsRUFBTyxFQUVwQyxDQUVPRyxVQUNOLE9BQXNCLElBQWZuQixLQUFLRCxPQUE4QixPQUFmQyxLQUFLRCxLQUNqQyxDQUVPcUIsT0FBT0MsR0FDYixPQUNDckIsS0FBS0osTUFBUXlCLEVBQVVoQixVQUN2QkwsS0FBS0gsU0FBV3dCLEVBQVVmLGFBQzFCTixLQUFLQyxNQUFRb0IsRUFBVWQsVUFDdkJQLEtBQUtELFFBQVVzQixFQUFVWixZQVc1QixTQUFxQmEsRUFBYUMsR0FDakMsR0FBSUQsRUFBS0UsU0FBV0QsRUFBS0MsT0FDeEIsT0FBTyxFQUdSLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJSCxFQUFLRSxPQUFRQyxJQUNoQyxHQUFJSCxFQUFLRyxLQUFPRixFQUFLRSxHQUNwQixPQUFPLEVBSVQsT0FBTyxDQUNSLENBdEJHQyxDQUFZMUIsS0FBS0ksZUFBZ0JpQixFQUFVYixvQkFFN0MsRUFzQlEsRUFBQWQsS0FBQUEsQywrRUNsRlQsZUFFQSxNQUFNaUMsRUFHRmhDLFlBQVlpQyxFQUFzQkMsR0FHOUIsR0FGQTdCLEtBQUs2QixNQUFRLEdBRVRBLEVBQU8sQ0FDUCxNQUFNQyxFQUFhRCxFQUNuQixJQUFLLE1BQU1SLEtBQWFTLEVBQVksQ0FDaEMsTUFBTWhCLEVBQWFPLEVBQVVSLE9BQzdCYixLQUFLNkIsTUFBTUUsS0FBS2pCLEUsT0FHcEIsSUFBSyxJQUFJbEIsRUFBTSxFQUFHQSxFQUFNLEVBQUdBLElBQ3ZCLElBQUssSUFBSW9DLEVBQU0sRUFBR0EsRUFBTSxFQUFHQSxJQUFPLENBQzlCLE1BQU1qQyxFQUFRNkIsRUFBU2hDLEdBQUtvQyxHQUN0QkMsRUFBTyxJQUFJLEVBQUF2QyxLQUFLRSxFQUFLb0MsRUFBZSxJQUFWakMsRUFBYyxHQUFLLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQWMsSUFBVkEsRUFBY0EsRUFBUSxHQUN0R0MsS0FBSzZCLE1BQU1FLEtBQUtFLEUsQ0FJaEMsQ0FFT3BCLE9BQ0gsTUFBTXFCLEVBQWlCbEMsS0FBS21DLGdCQUM1QixPQUFPLElBQUlSLEVBQUtPLEVBQWdCbEMsS0FBSzZCLE1BQ3pDLENBRU9ULE9BQU9nQixHQUNWLE1BQU1DLEVBQVlyQyxLQUFLc0MsV0FDakJSLEVBQWFNLEVBQVVFLFdBRTdCLElBQUssSUFBSWIsRUFBSSxFQUFHQSxFQUFJWSxFQUFVYixPQUFRQyxJQUNsQyxJQUFLWSxFQUFVWixHQUFHTCxPQUFPVSxFQUFXTCxJQUNoQyxPQUFPLEVBSWYsT0FBTyxDQUNYLENBR09hLFdBQWEsT0FBT3RDLEtBQUs2QixLQUFPLENBRWhDVSxRQUFRQyxFQUFrQkMsR0FDN0IsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUksRUFBR0EsSUFDbkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUksRUFBR0EsSUFDbkIsR0FBSUQsSUFBTUYsR0FBWUcsSUFBTUYsRUFDeEIsT0FBT3pDLEtBQUs2QixNQUFVLEVBQUphLEVBQVFDLEVBSTFDLENBRU9SLGdCQUNILE1BQU1TLEVBQXVCLEdBRTdCLElBQUssSUFBSWhELEVBQU0sRUFBR0EsRUFBTSxFQUFHQSxJQUFPLENBQzlCLE1BQU1pRCxFQUFvQixHQUMxQixJQUFLLElBQUliLEVBQU0sRUFBR0EsRUFBTSxFQUFHQSxJQUFPLENBQzlCLE1BQU1DLEVBQU9qQyxLQUFLdUMsUUFBUTNDLEVBQUtvQyxHQUMvQmEsRUFBUWQsS0FBS0UsRUFBS3hCLFcsQ0FFdEJtQyxFQUFTYixLQUFLYyxFLENBR2xCLE9BQU9ELENBQ1gsQ0FFT0UsU0FDSCxPQUFPOUMsS0FBSzZCLE1BQU1rQixPQUFPZCxHQUE2QixJQUFwQkEsRUFBS3hCLFlBQzNDLEVBSUssRUFBQWtCLEtBQUFBLEMsc0ZDeERBLEVBQUFxQixlQW5CYyxLQUNuQixJQUFJQyxFQUFtQixHQUN2QixJQUFJLElBQUl4QixFQUFJLEVBQUdBLEVBQUksRUFBR0EsSUFDbEJ3QixFQUFLeEIsR0FBSyxJQUFJeUIsTUFBTSxHQUFHQyxLQUFLLE1BRWhDLE1BQU10QixFQUFRdUIsU0FBU0MsaUJBQWlCLFNBQ3hDLEdBQUd4QixRQUF1QyxPQUFPLEtBQ2pELElBQUksSUFBSUosRUFBSSxFQUFHQSxHQUFLLEVBQUdBLElBQ25CLElBQUksSUFBSTZCLEVBQUksRUFBR0EsR0FBSyxFQUFHQSxJQUFLLENBQ3hCLE1BQU1DLEVBQU8xQixFQUFRLEVBQUZKLEVBQUk2QixHQUN2QixLQUFLQyxhQUFnQkMsYUFBYyxPQUFPLEtBQzFDLElBQUlELEVBQU0sT0FBTyxLQUNqQixNQUFNRSxFQUFVRixFQUFLRyxVQUNyQlQsRUFBS3hCLEdBQUc2QixHQUFLSyxPQUFPRixFLENBRzVCLE9BQU9SLENBQUksQyxzRkNsQmYsZUE0RFMsRUFBQVcsWUF2RFlDLElBQ2pCLE1BQU1aLEVBQU9HLFNBQVNVLGVBQWUsUUFDbENiLFNBR0hZLEVBQVNFLFNBQVEsQ0FBQ0MsRUFBZ0J4QixLQUM5QixNQUFNNUMsRUFBTXdELFNBQVNhLGNBQWMsT0FDeEIsT0FBUnJFLElBQ0hBLEVBQUlzRSxVQUFVQyxJQUFJLE9BQ2xCdkUsRUFBSXdFLGFBQWEsTUFBTyxHQUFHNUIsS0FDVixJQUFiQSxHQUErQixJQUFiQSxHQUFnQjVDLEVBQUlzRSxVQUFVQyxJQUFJLGFBQ3hEbEIsRUFBS29CLE9BQU96RSxHQUdab0UsRUFBS0QsU0FBUSxDQUFDaEUsRUFBZXVFLEtBQ3pCLE1BQU1yQyxFQUFPbUIsU0FBU2EsY0FBYyxPQUN4QixPQUFUaEMsSUFDSEEsRUFBS21DLGFBQWEsTUFBTyxHQUFHNUIsS0FDNUJQLEVBQUttQyxhQUFhLFNBQVUsR0FBR0UsS0FDL0JyQyxFQUFLaUMsVUFBVUMsSUFBSSxRQUNILEdBQVpHLEdBQTZCLEdBQVpBLEdBQWVyQyxFQUFLaUMsVUFBVUMsSUFBSSxhQUcxQyxPQUFWcEUsR0FBNEIsSUFBVkEsR0FDakJrQyxFQUFLbUMsYUFBYSxPQUFRLFVBQzFCbkMsRUFBS3NDLGlCQUFpQixRQUFTQyxJQUM1QnZDLEVBQUt5QixVQUFZM0QsRUFBTTBFLFdBRTlCN0UsRUFBSXlFLE9BQU9wQyxHQUFLLElBQ2xCLEdBQ0osRUFHTixNQUFNdUMsRUFBYUUsSUFDZixNQUFNVixFQUFPVSxFQUFNQyxPQUNuQixLQUFNWCxhQUFnQlIsYUFBYyxPQUNwQyxNQUFNNUQsRUFBTW9FLEVBQUtZLGFBQWEsT0FDeEIvRSxFQUFTbUUsRUFBS1ksYUFBYSxVQUMzQjNDLEVBQU9tQixTQUFTeUIsY0FBYyxTQUFTakYsZUFBaUJDLE9BQzlELEtBQUtvQyxhQUFnQnVCLGFBQWMsT0FDbkMsSUFBSXNCLEVBQ0osRUFBRyxDQUNDLE1BQU1DLEVBQVFDLE9BQU8sbUNBQ3JCLEdBQWEsT0FBVkQsRUFBZ0IsT0FDbkJELEVBQU1uQixPQUFPc0IsU0FBU0YsRSxPQUNqQkcsTUFBTXZCLE9BQU9tQixLQUN0QixJQUFLSSxNQUFNdkIsT0FBT21CLEtBQWtCLE9BQVQ3QyxFQUFlLENBQ3RDLElBQUlrRCxFQUNzQkEsRUFBSixLQUFuQmxELEVBQUttRCxVQUF1QyxFQUNyQnpCLE9BQU9zQixTQUFTaEQsRUFBS21ELFdBQy9DbkQsRUFBS3lCLFVBQVlvQixFQUFJTCxXQUNyQixFQUFBWSxVQUFVdEQsS0FBSyxDQUFDNEIsT0FBT3NCLFNBQVNyRixHQUFNK0QsT0FBT3NCLFNBQVNwRixHQUFTc0YsRyxpSEM3Qm5FLEVBQUFHLGVBM0JtQixFQTRCbkIsRUFBQUMsVUExQmMsQ0FDZCxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxJQWtCekIsRUFBQUMsVUFmYyxDQUNkLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEcsOEdDSXpCLEVBQUFDLGNBM0JrQixFQTRCbEIsRUFBQUMsVUExQmMsQ0FDZCxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxJQWtCekIsRUFBQUMsVUFmYyxDQUNkLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3pCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEcscUhDSXpCLEVBQUFDLGlCQTNCcUIsRUE0QnJCLEVBQUFDLFlBMUJnQixDQUNoQixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVBQUcsRUFBRSxFQUFJLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUN6QixDQUFDLEVB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WW5HLGlCQUFpQixRQUFTLEVBQUFxRCxZQUMxRGxCLE1BQU0sZ0RBRVgsTUFBTWlFLEVBQWdCdkgsU0FBU1UsZUFBZSxTQUN6QixPQUFsQjZHLEVBQXdCQSxFQUFjcEcsaUJBQWlCLFFBQVMsRUFBQWdDLFdBQzlERyxNQUFNLDZDQUVYa0UsT0FBT3JHLGlCQUFpQixXQUFXLFNBQVNzRyxHQUMxQixNQUFWQSxFQUFFQyxNQUE2QixJQUFkRCxFQUFFRSxVQUNuQkYsRUFBRUcsa0JBRUYsSUFBQW5DLFlBRVIsSUFFQSxNQUFNb0MsRUFBYTdILFNBQVNVLGVBQWUsUUFDekIsT0FBZm1ILEVBQ0NBLEVBQVcxRyxpQkFBaUIsUUFBUyxFQUFBc0UsVUFDbENuQyxNQUFNLDRDQUViLE1BQU13RSxFQUFjOUgsU0FBU1UsZUFBZSxTQUN6QixPQUFoQm9ILFFBQXdDcEMsSUFBaEJvQyxFQUN2QkEsRUFBWTNHLGlCQUFpQixRQUFTLEVBQUF1RCxXQUNuQ3BCLE1BQU0sNkNBT2IsSUFBQTlDLGFBQVl1SCxFQUFXOUUsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL0VudGl0aWVzL0NlbGwudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9FbnRpdGllcy9HcmlkLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvR2V0dGVyL2dldEdyaWQudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9NYW5hZ2luZ0dyaWQvY3JlYXRlLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvUmVwb3NpdG9yeS9FYXN5R3JpZHMvZ3JpZHNFYXN5LnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvUmVwb3NpdG9yeS9IYXJkR3JpZHMvZ3JpZHNIYXJkLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvUmVwb3NpdG9yeS9NZWRpdW1Hcmlkcy9ncmlkc01lZGl1bS50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL1JlcG9zaXRvcnkvZ2V0dGluZ1JhbmRvbUdyaWQudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9idXR0b24vY2hlY2tpbmdHcmlkLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvYnV0dG9uL2NsZWFyLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvYnV0dG9uL3NvbHZlLnRzIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvYnV0dG9uL3VuZG8udHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9zb2x2ZUdyaWQvZmluZE51bWJlcnMvbmFrZWRTaW5nbGUudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9zb2x2ZUdyaWQvcmVkdWNlUG9zc2liaWxpdGllcy9oaWRkZW5TaW5nbGUudHMiLCJ3ZWJwYWNrOi8vc3Vkb2t1d2VicGFjay8uL3NyYy9zb2x2ZUdyaWQvcmVkdWNlUG9zc2liaWxpdGllcy9zdWRva3VSdWxlcy50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrLy4vc3JjL3NvbHZlR3JpZC9zb2x2ZVN1ZG9rdS50cyIsIndlYnBhY2s6Ly9zdWRva3V3ZWJwYWNrL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3N1ZG9rdXdlYnBhY2svLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2VsbCB7XG5cdHByaXZhdGUgcm93OiBudW1iZXI7XG5cdHByaXZhdGUgY29sdW1uOiBudW1iZXI7XG5cdHByaXZhdGUgYm94OiBudW1iZXI7XG5cdHByaXZhdGUgdmFsdWU6IG51bWJlcjtcblx0cHJpdmF0ZSBwb3NzaWJsZVZhbHVlczogbnVtYmVyW107XG5cblx0Y29uc3RydWN0b3Iocm93OiBudW1iZXIgPSBudWxsLCBjb2x1bW46IG51bWJlciA9IG51bGwsIHBvc3NpYmxlc1ZhbHVlczogbnVtYmVyW10gPSBudWxsLCB2YWx1ZTogbnVtYmVyID0gMCkge1xuXHRcdHRoaXMucm93ID0gcm93O1xuXHRcdHRoaXMuY29sdW1uID0gY29sdW1uO1xuXHRcdC8vIGJveE51bWJlciA9IGJveFJvdyAqIDMgKyBib3hDb2x1bW5cblx0XHRpZiAocm93ID09PSBudWxsIHx8IGNvbHVtbiA9PT0gbnVsbCkgdGhpcy5ib3ggPSBudWxsO1xuXHRcdGVsc2UgdGhpcy5ib3ggPSBNYXRoLmZsb29yKHRoaXMucm93IC8gMykgKiAzICsgTWF0aC5mbG9vcih0aGlzLmNvbHVtbiAvIDMpO1xuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0XHR0aGlzLnBvc3NpYmxlVmFsdWVzID0gcG9zc2libGVzVmFsdWVzO1xuXHR9XG5cblx0cHVibGljIGdldFJvdygpIHsgcmV0dXJuIHRoaXMucm93IH1cblx0cHVibGljIGdldENvbHVtbigpIHsgcmV0dXJuIHRoaXMuY29sdW1uIH1cblx0cHVibGljIGdldEJveCgpIHsgcmV0dXJuIHRoaXMuYm94IH1cblx0cHVibGljIGdldFBvc3NpYmxlVmFsdWVzKCk6IG51bWJlcltdIHsgcmV0dXJuIHRoaXMucG9zc2libGVWYWx1ZXMgfVxuXHRwdWJsaWMgZ2V0VmFsdWUoKSB7IHJldHVybiB0aGlzLnZhbHVlOyB9XG5cblx0cHVibGljIHNldFZhbHVlKHZhbHVlOiBudW1iZXIpIHsgdGhpcy52YWx1ZSA9IHZhbHVlIH1cblx0cHVibGljIHNldFBvc3NpYmxlVmFsdWVzKHBvc3NpYmxlc1ZhbHVlczogbnVtYmVyW10pIHsgdGhpcy5wb3NzaWJsZVZhbHVlcyA9IHBvc3NpYmxlc1ZhbHVlcyB9XG5cblx0cHVibGljIGNsb25lKCk6IENlbGwge1xuXHRcdGNvbnN0IGNvcGllZENlbGwgPSBuZXcgQ2VsbCh0aGlzLnJvdywgdGhpcy5jb2x1bW4sIFsuLi50aGlzLnBvc3NpYmxlVmFsdWVzXSwgdGhpcy52YWx1ZSk7XG5cdFx0cmV0dXJuIGNvcGllZENlbGw7XG5cdH1cblxuXHRwdWJsaWMgY29weSgpOiBDZWxsIHtcblx0XHRjb25zdCBjb3BpZWRDZWxsID0gbmV3IENlbGwoKTtcblx0XHRjb3BpZWRDZWxsLnJvdyA9IHRoaXMucm93O1xuXHRcdGNvcGllZENlbGwuY29sdW1uID0gdGhpcy5jb2x1bW47XG5cdFx0Y29waWVkQ2VsbC5ib3ggPSB0aGlzLmJveDtcblx0XHRjb3BpZWRDZWxsLnZhbHVlID0gdGhpcy52YWx1ZTtcblx0XHRjb3BpZWRDZWxsLnBvc3NpYmxlVmFsdWVzID0gWy4uLnRoaXMucG9zc2libGVWYWx1ZXNdO1xuXHRcdHJldHVybiBjb3BpZWRDZWxsO1xuXHR9XG5cblx0cHVibGljIHJlbW92ZVBvc3NpYmxlVmFsdWUodmFsdWU6IG51bWJlcikge1xuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wb3NzaWJsZVZhbHVlcy5pbmRleE9mKHZhbHVlKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0dGhpcy5wb3NzaWJsZVZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLnZhbHVlID09PSAwIHx8IHRoaXMudmFsdWUgPT09IG51bGw7XG5cdH1cblxuXHRwdWJsaWMgZXF1YWxzKG90aGVyQ2VsbDogQ2VsbCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnJvdyA9PT0gb3RoZXJDZWxsLmdldFJvdygpICYmXG5cdFx0XHR0aGlzLmNvbHVtbiA9PT0gb3RoZXJDZWxsLmdldENvbHVtbigpICYmXG5cdFx0XHR0aGlzLmJveCA9PT0gb3RoZXJDZWxsLmdldEJveCgpICYmXG5cdFx0XHR0aGlzLnZhbHVlID09PSBvdGhlckNlbGwuZ2V0VmFsdWUoKSAmJlxuXHRcdFx0YXJyYXlzRXF1YWwodGhpcy5wb3NzaWJsZVZhbHVlcywgb3RoZXJDZWxsLmdldFBvc3NpYmxlVmFsdWVzKCkpXG5cdFx0KTtcblx0fVxuXG5cdC8vIHB1YmxpYyBpbmNsdWRlc1Bvc3NpYmlsaXR5KHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcblx0Ly8gXHRyZXR1cm4gdGhpcy5wb3NzaWJsZVZhbHVlcy5pbmNsdWRlcyh2YWx1ZSk7XG5cdC8vIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbXBhcmUgYXJyYXlzIGZvciBlcXVhbGl0eVxuZnVuY3Rpb24gYXJyYXlzRXF1YWwoYXJyMTogYW55W10sIGFycjI6IGFueVtdKTogYm9vbGVhbiB7XG5cdGlmIChhcnIxLmxlbmd0aCAhPT0gYXJyMi5sZW5ndGgpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGFycjEubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgeyBDZWxsIH1cbiIsImltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9DZWxsXCI7XG5cbmNsYXNzIEdyaWQge1xuICAgIGNlbGxzOiBDZWxsW107XG5cbiAgICBjb25zdHJ1Y3RvcihncmlkRGF0YTogbnVtYmVyW11bXSwgY2VsbHM/OiBDZWxsW10pIHtcbiAgICAgICAgdGhpcy5jZWxscyA9IFtdO1xuXG4gICAgICAgIGlmIChjZWxscykge1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJDZWxscyA9IGNlbGxzO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvdGhlckNlbGwgb2Ygb3RoZXJDZWxscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvcGllZENlbGwgPSBvdGhlckNlbGwuY29weSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHMucHVzaChjb3BpZWRDZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDk7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgOTsgY29sKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBncmlkRGF0YVtyb3ddW2NvbF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbChyb3csIGNvbCwgdmFsdWUgIT09IDAgPyBbXSA6IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5XSwgdmFsdWUgIT09IDAgPyB2YWx1ZSA6IDApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNvcHkoKTogR3JpZCB7XG4gICAgICAgIGNvbnN0IGNvcGllZEdyaWREYXRhID0gdGhpcy50b051bWJlckFycmF5KCk7XG4gICAgICAgIHJldHVybiBuZXcgR3JpZChjb3BpZWRHcmlkRGF0YSwgdGhpcy5jZWxscyk7XG4gICAgfVxuXG4gICAgcHVibGljIGVxdWFscyhvdGhlckdyaWQ6IEdyaWQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdGhpc0NlbGxzID0gdGhpcy5nZXRDZWxscygpO1xuICAgICAgICBjb25zdCBvdGhlckNlbGxzID0gb3RoZXJHcmlkLmdldENlbGxzKCk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzQ2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdGhpc0NlbGxzW2ldLmVxdWFscyhvdGhlckNlbGxzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuXG4gICAgcHVibGljIGdldENlbGxzKCkgeyByZXR1cm4gdGhpcy5jZWxsczsgfVxuXG4gICAgcHVibGljIGdldENlbGwocm93SW5kZXg6IG51bWJlciwgY29sdW1uSW5kZXg6IG51bWJlcikge1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IDk7IHIrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA5OyBjKyspIHtcbiAgICAgICAgICAgICAgICBpZiAociA9PT0gcm93SW5kZXggJiYgYyA9PT0gY29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2VsbHNbciAqIDkgKyBjXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdG9OdW1iZXJBcnJheSgpOiBudW1iZXJbXVtdIHtcbiAgICAgICAgY29uc3QgbnVtQXJyYXk6IG51bWJlcltdW10gPSBbXTtcblxuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA5OyByb3crKykge1xuICAgICAgICAgICAgY29uc3Qgcm93RGF0YTogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDk7IGNvbCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMuZ2V0Q2VsbChyb3csIGNvbCk7XG4gICAgICAgICAgICAgICAgcm93RGF0YS5wdXNoKGNlbGwuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBudW1BcnJheS5wdXNoKHJvd0RhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bUFycmF5O1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0Z1bGwoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlbGxzLmV2ZXJ5KChjZWxsKSA9PiBjZWxsLmdldFZhbHVlKCkgIT09IDApO1xuICAgIH1cblxufVxuXG5leHBvcnQgeyBHcmlkIH0iLCJcbi8vIGdldHRpbmcgdGhlIGN1cnJlbnQgR3JpZCBvdXQgb2YgRE9NXG5jb25zdCBnZXRDdXJyZW50R3JpZCA9ICgpOiBudW1iZXJbXVtdID0+IHtcbiAgICBsZXQgZ3JpZDogbnVtYmVyW11bXSA9IFtdO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgZ3JpZFtpXSA9IG5ldyBBcnJheSg5KS5maWxsKG51bGwpO1xuICAgIH1cbiAgICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gICAgaWYoY2VsbHMgPT09IG51bGwgfHwgY2VsbHMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8PSA4OyBpKyspIHtcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8PSA4OyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBjZWxsc1tpKjkral07IC8vIG1hcHBzIHRoZSA4MSBjZWxscyB0byB0aGUgMiBkaW0gYXJyYXlcbiAgICAgICAgICAgIGlmKCEodGVtcCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZighdGVtcCkgcmV0dXJuIG51bGw7IC8vIGNoZWNraW5nIGlmIHRlbXAgaXMgZmFsc3lcbiAgICAgICAgICAgIGNvbnN0IHRlbXBOdW0gPSB0ZW1wLmlubmVyVGV4dDtcbiAgICAgICAgICAgIGdyaWRbaV1bal0gPSBOdW1iZXIodGVtcE51bSk7IC8vIHJldHVybiAnMCcgd2hlbiAndGVtcE51bSA9IG51bGwnIVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBncmlkO1xufVxuXG5leHBvcnQgeyBnZXRDdXJyZW50R3JpZCB9IiwiaW1wb3J0IHsgdW5kb1N0YWNrIH0gZnJvbSBcIi4uL2J1dHRvbi91bmRvXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY3JlYXRpbmcgR3JpZC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIGNyZWF0aW5nIEdyaWQgd2l0aCBldmVudExpc3RlbmVyIGlucHV0dGluZyBjZWxsc1xuLy8gYSBmdW5jdGlvbiBjcmVhdGluZyBhIDl4OSBncmlkIG9mIHNxdWFyZXNcbmNvbnN0IGNyZWF0ZUJvYXJkID0gKHdpdGhHcmlkOiBudW1iZXJbXVtdKTogdm9pZCA9PiB7XG4gICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JpZFwiKTtcbiAgICBpZihncmlkID09PSBudWxsIHx8IGdyaWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gICAgLy8gY3JlYXRlIDkgcm93cyBmb3IgdGhlIHN1ZG9rdSBncmlkXG4gICAgd2l0aEdyaWQuZm9yRWFjaCgoZWxlbTogbnVtYmVyW10sIHJvd0luZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGlmKHJvdyA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgncm93Jyk7XG4gICAgICAgIHJvdy5zZXRBdHRyaWJ1dGUoXCJyb3dcIiwgYCR7cm93SW5kZXh9YCk7XG4gICAgICAgIGlmIChyb3dJbmRleCA9PT0gMiB8fCByb3dJbmRleCA9PT0gNSkgcm93LmNsYXNzTGlzdC5hZGQoJ3VuZGVybGluZScpO1xuICAgICAgICBncmlkLmFwcGVuZChyb3cpO1xuXG4gICAgICAgIC8vIGluc2VydCBjZWxscyBpbnRvIGVhY2ggcm93XG4gICAgICAgIGVsZW0uZm9yRWFjaCgodmFsdWU6IG51bWJlciwgY29sSW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpZihjZWxsID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcInJvd1wiLCBgJHtyb3dJbmRleH1gKVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJjb2x1bW5cIiwgYCR7Y29sSW5kZXh9YClcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgICAgICAgICBpZiAoY29sSW5kZXggPT0gMiB8fCBjb2xJbmRleCA9PSA1KSBjZWxsLmNsYXNzTGlzdC5hZGQoJ3JpZ2h0bGluZScpO1xuXG4gICAgICAgICAgICAvLyBjb25zdCBjZWxsTnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaWYodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkTnVtYmVyKTtcbiAgICAgICAgICAgIH0gZWxzZSBjZWxsLmlubmVyVGV4dCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJvdy5hcHBlbmQoY2VsbCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5jb25zdCBhZGROdW1iZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcbiAgICBjb25zdCBlbGVtID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmICghKGVsZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybjtcbiAgICBjb25zdCByb3cgPSBlbGVtLmdldEF0dHJpYnV0ZShcInJvd1wiKTtcbiAgICBjb25zdCBjb2x1bW4gPSBlbGVtLmdldEF0dHJpYnV0ZShcImNvbHVtblwiKTtcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW3Jvdz1cIiR7cm93fVwiXVtjb2x1bW49XCIke2NvbHVtbn1cIl1gKTtcbiAgICBpZighKGNlbGwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHJldHVybjtcbiAgICBsZXQgbnVtOiBudW1iZXI7XG4gICAgZG8ge1xuICAgICAgICBjb25zdCBwcm9tdCA9IHByb21wdChcIkVudGVyIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgOTpcIik7XG4gICAgICAgIGlmKHByb210ID09PSBudWxsKSByZXR1cm47XG4gICAgICAgIG51bSA9IE51bWJlci5wYXJzZUludChwcm9tdCk7XG4gICAgfSB3aGlsZSAoaXNOYU4oTnVtYmVyKG51bSkpKVxuICAgIGlmICghaXNOYU4oTnVtYmVyKG51bSkpICYmIGNlbGwgIT09IG51bGwpIHtcbiAgICAgICAgbGV0IG51bWJlckJlZm9yZUNoYW5nZTogbnVtYmVyO1xuICAgICAgICBpZihjZWxsLmlubmVySFRNTCA9PT0gYGApIG51bWJlckJlZm9yZUNoYW5nZSA9IDA7XG4gICAgICAgIGVsc2UgbnVtYmVyQmVmb3JlQ2hhbmdlID0gTnVtYmVyLnBhcnNlSW50KGNlbGwuaW5uZXJIVE1MKTtcbiAgICAgICAgY2VsbC5pbm5lclRleHQgPSBudW0udG9TdHJpbmcoKTtcbiAgICAgICAgdW5kb1N0YWNrLnB1c2goW051bWJlci5wYXJzZUludChyb3cpLCBOdW1iZXIucGFyc2VJbnQoY29sdW1uKSwgbnVtYmVyQmVmb3JlQ2hhbmdlXSlcbiAgICB9XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUJvYXJkIH1cbiIsImNvbnN0IG51bU9mRWFzeUdyaWRzID0gMjtcblxuY29uc3QgZWFzeUdyaWQxID0gW1xuICAgIFs4LCAyLCA3LCAzLCAwLCAwLCAwLCA0LCA5XSxcbiAgICBbNiwgNCwgOSwgMCwgNSwgMCwgOCwgMywgMF0sXG4gICAgWzAsIDAsIDAsIDQsIDgsIDksIDYsIDAsIDBdLFxuICAgIFswLCAwLCAwLCA2LCAwLCAxLCAyLCAwLCAwXSxcbiAgICBbMiwgMSwgMCwgMCwgMCwgNywgMCwgMCwgNl0sXG4gICAgWzQsIDksIDAsIDAsIDAsIDAsIDEsIDUsIDddLFxuICAgIFsxLCA4LCAwLCAwLCAyLCA0LCA3LCAwLCAwXSxcbiAgICBbMCwgMCwgMCwgMCwgNywgMywgMCwgMCwgMF0sXG4gICAgWzMsIDAsIDQsIDEsIDAsIDAsIDAsIDAsIDBdXG5dO1xuXG5jb25zdCBlYXN5R3JpZDIgPSBbXG4gICAgWzQsIDksIDAsIDgsIDAsIDAsIDUsIDEsIDBdLFxuICAgIFswLCAxLCA4LCAwLCA1LCAwLCAwLCAwLCA2XSxcbiAgICBbMCwgMCwgMCwgMCwgNiwgOSwgMCwgMCwgNF0sXG4gICAgWzAsIDAsIDUsIDAsIDAsIDAsIDYsIDAsIDBdLFxuICAgIFswLCA3LCA0LCA1LCAwLCA2LCAyLCA5LCAwXSxcbiAgICBbOSwgMCwgMCwgMywgMCwgMCwgMSwgNCwgNV0sXG4gICAgWzUsIDAsIDAsIDksIDQsIDAsIDAsIDYsIDBdLFxuICAgIFswLCAwLCA5LCAyLCA3LCA1LCAwLCAwLCAwXSxcbiAgICBbOCwgMiwgNywgMCwgMywgMSwgMCwgMCwgMF1cbl1cblxuZXhwb3J0IHtcbiAgICBudW1PZkVhc3lHcmlkcyxcbiAgICBlYXN5R3JpZDEsXG4gICAgZWFzeUdyaWQyXG59IiwiY29uc3QgbnVtT2ZIYXJkcmlkcyA9IDI7XG5cbmNvbnN0IGhhcmRHcmlkMSA9IFtcbiAgICBbMCwgOCwgOSwgMywgNywgMCwgMCwgNCwgMF0sXG4gICAgWzMsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgIFswLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwXSxcbiAgICBbMCwgMCwgMCwgMCwgMCwgOCwgMCwgMCwgNF0sXG4gICAgWzAsIDcsIDYsIDAsIDksIDAsIDAsIDgsIDBdLFxuICAgIFswLCA1LCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBbNSwgMCwgMCwgMCAsMCwgMCwgMCwgNiwgMF0sXG4gICAgWzQsIDAsIDAsIDAsIDMsIDAsIDAsIDAsIDBdLFxuICAgIFswLCA2LCAzLCA3LCAwLCAwLCAwLCAwLCAxXVxuXTtcblxuY29uc3QgaGFyZEdyaWQyID0gW1xuICAgIFswLCAwLCA4LCAxLCAwLCAwLCA1LCAwLCAwXSxcbiAgICBbNywgMCwgMCwgOSwgMCwgMCwgMCwgMCwgMF0sXG4gICAgWzAsIDAsIDQsIDAsIDUsIDcsIDAsIDYsIDBdLFxuICAgIFsyLCAwLCAwLCAwLCA0LCA1LCA4LCAwLCAwXSxcbiAgICBbMCwgOCwgMCwgMCwgMCwgMCwgMCwgOSwgMF0sXG4gICAgWzAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDBdLFxuICAgIFswLCAwLCAwLCA3LCAwLCAwLCAwLCAwLCAwXSxcbiAgICBbNCwgMCwgMCwgMCwgOCwgMiwgOSwgMCwgMF0sXG4gICAgWzAsIDAsIDYsIDAsIDAsIDAsIDAsIDAsIDNdXG5dO1xuXG5leHBvcnQge1xuICAgIG51bU9mSGFyZHJpZHMsXG4gICAgaGFyZEdyaWQxLFxuICAgIGhhcmRHcmlkMlxufSIsImNvbnN0IG51bU9mTWVkaXVtR3JpZHMgPSAyO1xuXG5jb25zdCBtZWRpdW1HcmlkMSA9IFtcbiAgICBbOSwgMCwgMCwgMCwgMCwgNCwgMCwgMCwgMF0sIFxuICAgIFswLCAwLCA1LCAwLCAwLCAwLCAwLCA2LCAwXSxcbiAgICBbMCwgNywgMCwgMCwgMSwgMiwgMCwgMCwgNV0sXG4gICAgWzAsIDAsMCAsIDgsIDAsIDAsIDAsIDAsIDBdLFxuICAgIFszLCAwLCAwLCAwLCAwLCAwLCA5LCAwLCAwXSxcbiAgICBbMCwgMiwgMCwgMCwgNywgNSwgMCwgMCwgNl0sXG4gICAgWzIsIDAsIDAsIDAsIDgsIDEsIDAsIDMsIDBdLFxuICAgIFswLCAwLCAwLCA0LCAwLCAwLCAwLCAwLCAxXSxcbiAgICBbMCwgOCwgMCwgNiwgMCwgMCwgMCwgMCwgMF1cbl07XG5cbmNvbnN0IG1lZGl1bUdyaWQyID0gW1xuICAgIFs1LCAwLCAwLCAyLCAwLCAwLCAwLCA0LCAwXSxcbiAgICBbNiwgMCwgMCwgMCwgMywgMCwgMCwgMCwgMl0sXG4gICAgWzAsIDAsIDAsIDAsIDAsIDAsIDMsIDAsIDFdLFxuICAgIFswLCA4LCAwLCAwLCA0LCAwLCA5LCAxLCAwXSxcbiAgICBbMCwgMSwgMCwgMywgMCwgMCwgMCwgMCwgMF0sXG4gICAgWzAsIDksIDAsIDcsIDAsIDAsIDAsIDYsIDBdLFxuICAgIFswLCA2LCAwLCAwLCAwLCA4LCAwLCAyLCAwXSxcbiAgICBbNywgMCwgMCwgNCwgMCwgMCwgMCwgOSwgMF0sXG4gICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdXG5dO1xuXG5leHBvcnQge1xuICAgIG51bU9mTWVkaXVtR3JpZHMsXG4gICAgbWVkaXVtR3JpZDEsXG4gICAgbWVkaXVtR3JpZDJcbn0iLCJpbXBvcnQgeyBlcnJvck1vbml0b3IgfSBmcm9tIFwiZXZlbnRzXCI7XG5pbXBvcnQgKiBhcyBFYXN5R3JpZHMgZnJvbSBcIi4vRWFzeUdyaWRzL2dyaWRzRWFzeVwiO1xuaW1wb3J0ICogYXMgSGFyZEdyaWRzIGZyb20gXCIuL0hhcmRHcmlkcy9ncmlkc0hhcmRcIjtcbmltcG9ydCAqIGFzIE1lZGl1bUdyaWRzIGZyb20gXCIuL01lZGl1bUdyaWRzL2dyaWRzTWVkaXVtXCI7XG5cbi8qKlxuICogbm90ZTogdXNpbmcgQnJhY2tldCBOb3RhdGlvbiB0byBBY2Nlc3MgdGhlIEdyaWQgUmVwb3MgcmVzcGVjdGl2ZWx5XG4gKiBlLmc6IFwiRWFzeUdyaWRzW3JhbmRHcmlkTmFtZV1cIlwiIGlzIGVxdWl2YWxlbnQgdG86XG4gKiBcIkVhc3lHcmlkcy5lYXN5R3JpZDFcIiwgaWYgcmFuZEdyaWROYW1lIGlzIFwiZWFzeUdyaWQxXCJcbiAqL1xuXG5jb25zdCBnZXRSYW5kb21FYXN5R3JpZCA9ICgpOiBudW1iZXJbXVtdID0+IHtcbiAgICBjb25zdCByYW5kTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwICUgRWFzeUdyaWRzLm51bU9mRWFzeUdyaWRzKSArIDE7XG4gICAgY29uc3QgcmFuZEdyaWROYW1lID0gYGVhc3lHcmlkJHtyYW5kTnVtfWA7XG4gICAgY29uc3QgcmFuZEdyaWQgPSBFYXN5R3JpZHNbcmFuZEdyaWROYW1lXTtcbiAgICByZXR1cm4gcmFuZEdyaWQ7XG59XG5cbmNvbnN0IGdldFJhbmRvbU1lZGl1bUdyaWQgPSAoKTogbnVtYmVyW11bXSA9PiB7XG4gICAgY29uc3QgcmFuZE51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCAlIE1lZGl1bUdyaWRzLm51bU9mTWVkaXVtR3JpZHMpICsgMTtcbiAgICBjb25zdCByYW5kR3JpZE5hbWUgPSBgbWVkaXVtR3JpZCR7cmFuZE51bX1gO1xuICAgIGNvbnN0IHJhbmRHcmlkID0gTWVkaXVtR3JpZHNbcmFuZEdyaWROYW1lXTtcbiAgICByZXR1cm4gcmFuZEdyaWQ7XG59XG5cbmNvbnN0IGdldFJhbmRvbUhhcmRHcmlkID0gKCk6IG51bWJlcltdW10gPT4ge1xuICAgIGNvbnN0IHJhbmROdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAgJSBIYXJkR3JpZHMubnVtT2ZIYXJkcmlkcykgKyAxO1xuICAgIGNvbnN0IHJhbmRHcmlkTmFtZSA9IGBoYXJkR3JpZCR7cmFuZE51bX1gO1xuICAgIGNvbnN0IHJhbmRHcmlkID0gSGFyZEdyaWRzW3JhbmRHcmlkTmFtZV07XG4gICAgcmV0dXJuIHJhbmRHcmlkO1xufVxuXG5leHBvcnQgeyBcbiAgICBnZXRSYW5kb21FYXN5R3JpZCwgXG4gICAgZ2V0UmFuZG9tTWVkaXVtR3JpZCwgXG4gICAgZ2V0UmFuZG9tSGFyZEdyaWQgXG59OyIsImltcG9ydCB7IGdldEN1cnJlbnRHcmlkIH0gZnJvbSBcIi4uL0dldHRlci9nZXRHcmlkXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY2hlY2tpbmcgdGhlIEdyaWQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBmdW5jdGlvbnMgZm9yIHRoZSBjaGVjayBCdXR0b25cblxuLyoqXG4gKiB0aGUgbWFpbiBjaGVja2luZyBmdW5jdGlvbiB0aGF0IHdpbGwgdXNlIGFsbCBvdGhlciBmdW5jdGlvbiBpbiB0aGlzIGZpbGUgKGFuZCBnZXR0aW5nIHRoZSBjdXJyZW50IGdyaWQpXG4gKi9cbmNvbnN0IGNoZWNrR3JpZCA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBvdXRwdXQ6IHN0cmluZztcbiAgICBjb25zdCBnID0gZ2V0Q3VycmVudEdyaWQoKTtcbiAgICBpZiAoZyA9PT0gbnVsbCB8fCBnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3V0cHV0ID0gYHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggZmV0Y2hpbmcgdGhlIGdyaWQgOlNgO1xuICAgICAgICBhbGVydChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1lbHNlIGlmIChncmlkSXNGdWxsKCkgIT09IHRydWUpIHtcbiAgICAgICAgb3V0cHV0ID0gYHRoZSBncmlkIGlzIG5vdCBmdWxseSBmaWxsZWQgOlNgO1xuICAgICAgICBhbGVydChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1lbHNlIGlmIChjaGVja1Jvd3NBbmRDb2x1bW5zKCkgIT09IHRydWUgJiYgY2hlY2tCb3hlcygpICE9PSB0cnVlKSB7XG4gICAgICAgIG91dHB1dCA9IGB0aGUgZ3JpZCBpcyBpbmNvcnJlY3QgOlNgO1xuICAgICAgICBhbGVydChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1lbHNlIHtcbiAgICAgICAgb3V0cHV0ID0gYHRoZSBncmlkIGlzIGNvcnJlY3QgOkQuIFdlbGwgZG9uZSFgO1xuICAgICAgICBhbGVydChvdXRwdXQgKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dFxuICAgIH07XG59XG5cbmNvbnN0IGdyaWRJc0Z1bGwgPSAoKTogYm9vbGVhbiAgID0+IHtcbiAgICBjb25zdCBnID0gZ2V0Q3VycmVudEdyaWQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDk7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDk7IGorKykge1xuICAgICAgICAgICAgaWYgKGdbaV1bal0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBhIGxvdCBvZiB0cm91YmxlIHdpdGggdGhpcyBvbmUuIFNldCB0aGUgY291bnRlciBBcnJheSB0byBhbGwgMHMgYWZ0ZXIgZWFjaCByb3cvY29sdW1uO1xuICogLS0+IGNvdW50aW5nIHRoZSBvY2N1cnJlbmNlIG9mIG51bWJlcnMgaW4gZWFjaCByb3cvY29sdW1uLCBjaGVja2luZyBpZiBpdCBpcyBlcXVhbCB0byAxXG4gKiBAcmV0dXJucyBib29sZWFuIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1ZG9rdSBncmlkJ3Mgcm93cyBhbmQgY29sdW1ucyBhcmUgY29ycmVjdCBcbiAqIGFzIHBlciBzdWRva3UgcnVsZXNcbiAqL1xuY29uc3QgY2hlY2tSb3dzQW5kQ29sdW1ucyA9ICgpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCBjdXJyZW50R3JpZCA9IGdldEN1cnJlbnRHcmlkKCk7XG4gICAgbGV0IGNvdW50ZXJSb3dzID0gbmV3IEFycmF5KDkpLmZpbGwoMCk7XG4gICAgbGV0IGNvdW50ZXJDb2x1bW5zID0gbmV3IEFycmF5KDkpLmZpbGwoMCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgY291bnRlclJvd3MuZmlsbCgwKTsgXG4gICAgICAgIGNvdW50ZXJDb2x1bW5zLmZpbGwoMCk7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgOTsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBudW1Sb3cgPSBjdXJyZW50R3JpZFtpXVtqXTtcbiAgICAgICAgICAgIGNvbnN0IG51bUNvbCA9IGN1cnJlbnRHcmlkW2pdW2ldO1xuICAgICAgICAgICAgY291bnRlclJvd3NbbnVtUm93LTFdKys7XG4gICAgICAgICAgICBjb3VudGVyQ29sdW1uc1tudW1Db2wtMV0rKztcbiAgICAgICAgICAgIGlmKGNvdW50ZXJSb3dzW251bVJvdy0xXSAhPSAxKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZihjb3VudGVyQ29sdW1uc1tudW1Db2wtMV0gIT0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGV2ZW4gb25lIGVsZW0gb2YgdGhlIGNvdW50QXJyYXlzIGlzIG5vdCBlcXVhbCAxIGZhbHNlIHdpbGwgYmUgcmV0dXJuZWRcbiAgICAgICAgLy8gaWYoY291bnRlclJvd3Muc29tZShjb3VudCA9PiBjb3VudCAhPT0gOSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gZWxzZSBpZihjb3VudGVyQ29sdW1ucy5zb21lKGNvdW50ID0+IGNvdW50ICE9PSA5KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBkb2Vzbid0IHdvcmsgZm9yIHRoZSBpbmNvcnJlY3Qgb3JkZXIgb2YgbnVtYmVycyBpbiB0aGUgZ3JpZFxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vLyBhIGxpdHRsZSB1bnBsZWFzYW50LCBidXQgYXMgb2YgcmlnaHQgbm93IEkgZG9uJ3Qga25vdyB3aGF0IGVsc2UgdG8gZG8gOi9cbi8vIEBNZSBzdXJlbHkgaXQgY2FuIGJlIHNvbHZlZCBtb3JlIGVsZWdhbnRseSBidXQgXCJkb24ndCBjaGFuZ2UgYSBydW5uaW5nIHN5c3RlbVwiIDpEIFxuY29uc3QgY2hlY2tCb3hlcyA9ICgpOiBib29sZWFuID0+IHtcbiAgICAvLyBmaXJzdCByb3cgb2YgYm94ZXM6XG4gICAgaWYgKGJveENoZWNrSGVscGVyKDAsIDIsIDAsIDIpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcigwLCAyLCAzLCA1KSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoMCwgMiwgNiwgOCkgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIHNlY29uZCByb3cgb2YgYm94ZXM6XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoMywgNSwgMCwgMikgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDMsIDUsIDYsIDgpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcigzLCA1LCAwLCAyKSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gdGhpcmQgcm93IG9mIGJveGVzOlxuICAgIGVsc2UgaWYgKGJveENoZWNrSGVscGVyKDUsIDgsIDAsIDIpICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChib3hDaGVja0hlbHBlcig1LCA4LCAzLCA1KSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoYm94Q2hlY2tIZWxwZXIoNSwgOCwgNSwgOCkgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIGVsc2UgcmV0dXJuIHRydWVcbn1cblxuY29uc3QgYm94Q2hlY2tIZWxwZXIgPSAoZnJvbVJvdzogbnVtYmVyLCB0b1JvdzogbnVtYmVyLCBmcm9tQ29sdW1uOiBudW1iZXIsIHRvQ29sdW1uOiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCBnID0gZ2V0Q3VycmVudEdyaWQoKTtcbiAgICBsZXQgY291bnRlciA9IG5ldyBBcnJheSg5KS5maWxsKDApO1xuICAgIC8vIGlmIChmcm9tUm93ID09IG51bGwgfHwgZnJvbVJvdyA9PSB1bmRlZmluZWQgfHwgdG9Sb3cgPT0gbnVsbCB8fCB0b1JvdyA9PSB1bmRlZmluZWRcbiAgICAvLyAgICAgfHwgZnJvbUNvbHVtbiA9PSBudWxsIHx8IGZyb21Db2x1bW4gPT0gdW5kZWZpbmVkIHx8IHRvQ29sdW1uID09IG51bGwgfHwgdG9Db2x1bW4gPT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IGZyb21Sb3c7IGkgPD0gdG9Sb3c7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gZnJvbUNvbHVtbjsgaiA8PSB0b0NvbHVtbjsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gPSBnW2ldW2pdO1xuICAgICAgICAgICAgY291bnRlcltudW0tMV0rKztcbiAgICAgICAgICAgIGlmIChjb3VudGVyW251bS0xXSA+IDEpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IHsgY2hlY2tHcmlkLCBjaGVja1Jvd3NBbmRDb2x1bW5zIH0iLCJpbXBvcnQgeyBjcmVhdGVCb2FyZCB9IGZyb20gXCIuLi9NYW5hZ2luZ0dyaWQvY3JlYXRlXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY2xlYXJpbmcgdGhlIEdyaWQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGNyZWF0ZVZvaWRHcmlkID0gKCk6IG51bWJlcltdW10gPT4ge1xuICAgIGxldCBncmlkOiBudW1iZXJbXVtdID0gW107XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDk7IGkrKykge1xuICAgICAgICBncmlkW2ldID0gbmV3IEFycmF5KDkpLmZpbGwobnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBncmlkO1xufVxuXG5jb25zdCBkZWxldGVCb2FyZCA9ICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGdyaWRgKTtcbiAgICBpZihncmlkID09PSBudWxsKSByZXR1cm47XG4gICAgd2hpbGUoZ3JpZC5sYXN0Q2hpbGQpIHtcbiAgICAgICAgZ3JpZC5yZW1vdmVDaGlsZChncmlkLmxhc3RDaGlsZCk7XG4gICAgfVxufVxuXG5jb25zdCBjbGVhckJvYXJkID0gKCk6IHZvaWQgPT4ge1xuICAgIGRlbGV0ZUJvYXJkKCk7XG4gICAgY3JlYXRlQm9hcmQoY3JlYXRlVm9pZEdyaWQoKSk7XG59XG5cbmV4cG9ydCB7IGNsZWFyQm9hcmQsIGRlbGV0ZUJvYXJkIH0iLCJpbXBvcnQgeyBnZXRDdXJyZW50R3JpZCB9IGZyb20gXCIuLi9HZXR0ZXIvZ2V0R3JpZFwiO1xuLy8gaW1wb3J0IHsgZmluZE51bWJlcnMgfSBmcm9tIFwiLi9maW5kTWlzc2luZ051bWJlcnNcIjtcbmltcG9ydCB7IGNsZWFyQm9hcmQsIGRlbGV0ZUJvYXJkIH0gZnJvbSBcIi4vY2xlYXJcIjtcbmltcG9ydCB7IGNyZWF0ZUJvYXJkIH0gZnJvbSBcIi4uL01hbmFnaW5nR3JpZC9jcmVhdGVcIjtcbmltcG9ydCB7IEdyaWQgfSBmcm9tIFwiLi4vRW50aXRpZXMvR3JpZFwiO1xuaW1wb3J0IHsgc29sdmVTdWRva3UgfSBmcm9tIFwiLi4vc29sdmVHcmlkL3NvbHZlU3Vkb2t1XCI7XG5cbmNvbnN0IHNvbHZlR3JpZCA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgdGhlIHNvbHZlIGJ1dHRvbiB3YXMgcHJlc3NlZC5gKVxuICAgIGNvbnN0IGN1cnJlbnRHcmlkOiBudW1iZXJbXVtdID0gZ2V0Q3VycmVudEdyaWQoKTtcbiAgICBjb25zdCBncmlkOiBHcmlkID0gbmV3IEdyaWQoY3VycmVudEdyaWQpO1xuICAgIGNvbnN0IHJlc3VsdGluZ0dyaWQ6IEdyaWQgPSBzb2x2ZVN1ZG9rdShncmlkKTtcbiAgICBjb25zdCByZXN1bHRpbmdHcmlkVG9OdW1BcnIgPSByZXN1bHRpbmdHcmlkLnRvTnVtYmVyQXJyYXkoKTtcbiAgICBkZWxldGVCb2FyZCgpO1xuICAgIGNyZWF0ZUJvYXJkKHJlc3VsdGluZ0dyaWRUb051bUFycik7XG59XG5cbmV4cG9ydCB7IHNvbHZlR3JpZCB9IiwiLyoqXG4gKiB1bmRvIGlzIGltcGxlbWVudGVkIGJ5IGEgc3RhY2sgdGhhdCB3aWxsIGJlIHB1c2hlZCAoS29vcmRpbmF0ZXMsIE51bWJlcikgXG4gKiB3aGVuIGEgbnVtYmVyIGdldHMgYWRkZWQgdG8gdGhlIGdyaWRcbiAqIHRoZSBzdGFjayB3aWxsIGJlIHBvcHBlZCB3aGVuOiB0aGUgdW5kbyBidXR0b24gaXMgcHJlc3NlZFxuICogLS0+IHRoZSBzdGFjayBtdXN0IGJlIGdsb2JhbCBvZiBzb21lIGtpbmRcbiAqL1xuXG5pbnRlcmZhY2UgSVN0YWNrPFQ+IHtcbiAgICBwdXNoKGl0ZW06IFQpOiB2b2lkO1xuICAgIHBvcCgpOiBUIHwgdW5kZWZpbmVkO1xuICAgIHBlZWsoKTogVCB8IHVuZGVmaW5lZDtcbiAgICBzaXplKCk6IFQgfCBudW1iZXI7XG59XG5cbmFic3RyYWN0IGNsYXNzIENvbGxlY3Rpb248VD4ge1xuICAgIHByb3RlY3RlZCBzdG9yYWdlOiBUW10gPSBbXTtcbiAgXG4gICAgc2l6ZSgpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5sZW5ndGg7XG4gICAgfVxuICAgIGFic3RyYWN0IGlzRnVsbCgpOiBib29sZWFuO1xuICB9XG5cbiAgY2xhc3MgU3RhY2tDb2xsZWN0aW9uPFQ+IGV4dGVuZHMgQ29sbGVjdGlvbjxUPiBpbXBsZW1lbnRzIElTdGFjazxUPiB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjYXBhY2l0eTogbnVtYmVyID0gSW5maW5pdHkpIHtcbiAgICAgIHN1cGVyKCk7XG4gICAgfVxuICBcbiAgICBwdXNoKGl0ZW06IFQpIHtcbiAgICAgIGlmICh0aGlzLmlzRnVsbCgpKSB7XG4gICAgICAgIHRocm93IEVycm9yKFwiU3RhY2sgaGFzIHJlYWNoZWQgbWF4IGNhcGFjaXR5LCB5b3UgY2Fubm90IGFkZCBtb3JlIGl0ZW1zXCIpO1xuICAgICAgfVxuICAgICAgLy8gSW4gdGhlIGRlcml2ZWQgY2xhc3MsIHdlIGNhbiBhY2Nlc3MgcHJvdGVjdGVkIHByb3BlcnRpZXMgb2YgdGhlIGFic3RyYWN0IGNsYXNzXG4gICAgICB0aGlzLnN0b3JhZ2UucHVzaChpdGVtKTtcbiAgICB9XG4gIFxuICAgIHBvcCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2UucG9wKCk7XG4gICAgfVxuICBcbiAgICBwZWVrKCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVt0aGlzLnNpemUoKSAtIDFdO1xuICAgIH1cbiAgXG4gICAgLy8gSW1wbGVtZW50YXRpb24gb2YgdGhlIGFic3RyYWN0IG1ldGhvZFxuICAgIGlzRnVsbCgpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLmNhcGFjaXR5ID09PSB0aGlzLnNpemUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogYSBTdGFjayBDb2xsZWN0aW9uIGZpbGxlZCB3aXRoIGEgMiBkaW0gbnVtYmVyIEFycmF5OlxuICAgKiBlLmc6IGluIHRoZSBncmlkIHRoZSBjZWxsIGluIHJvdyAzLCBjb2x1bW4gNSBnZXRzIHVwZGF0ZWQgdG8gNzpcbiAgICogc3RhY2tGb3JVbmRvLnB1c2goWzMsNSwwXSkgLS0+IGluIHRoZSBjcmVhdGluZ0dyaWQuYWRkTnVtYmVyKClcbiAgICogMCBzYXlzIGluIHRoaXMgY2FzZSwgdGhhdCBvbmUgc3RlcCBiZWZvcmUgdGhlIGNlbGwgd2FzIG5vdCBmaWxsZWRcbiAgICogSWYgdGhlIHVuZG8gYnV0dG9uIGlzIHByZXNzZWQgdGhlIGlubmVyVGV4dCBodG1sIG9mIHRoZSBjZWxsIGluIHJvdyAzLCBjb2x1bW4gNSB3aWxsIGJlIHNldCB0byB6ZXJvLlxuICAgKiAuLi5hbmQ6IHN0YWNrRm9yVW5kby5wb3AoKSAtLT4gaW4gdGhlIGNyZWF0aW5nR3JpZC5hZGROdW1iZXIoKVxuICAgKi9cbiAgY29uc3QgdW5kb1N0YWNrID0gbmV3IFN0YWNrQ29sbGVjdGlvbjxudW1iZXJbXT4oKTtcblxuICBjb25zdCB1bmRvU3RlcCA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIGlmKHVuZG9TdGFjay5wZWVrKCkgPT09IG51bGwgfHwgdW5kb1N0YWNrLnBlZWsoKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHN0ciA9IGB1bmRvU3RhY2sgaXMgbnVsbCBvciB1bmRlZmluZWRgO1xuICAgICAgICBhbGVydChzdHIpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH0gZWxzZSBpZih1bmRvU3RhY2suc2l6ZSgpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHN0ciA9IGB0aGUgdW5kb1N0YWNrIGlzIG5vdCB5ZXQgYnVpbHRgO1xuICAgICAgICBhbGVydChzdHIpO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBjb25zdCBhcnIgPSB1bmRvU3RhY2sucG9wKCk7XG4gICAgaWYoYXJyLmxlbmd0aCAhPT0gMykge1xuICAgICAgICBjb25zdCBzdHIgPSBgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBmZXRjaGluZyBhbiB1bmRvU3RhY2stZWxlbWVudGA7XG4gICAgICAgIGFsZXJ0KHN0cik7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbcm93PVwiJHthcnJbMF19XCJdW2NvbHVtbj1cIiR7YXJyWzFdfVwiXWApO1xuICAgIGNvbnNvbGUubG9nKGB1bmRpZCByb3cgJHthcnJbMF0rMX0gY29sdW1uICR7YXJyWzFdKzF9IGZyb20gJHtjZWxsLmlubmVySFRNTH0gdG8gJHthcnJbMl19YCk7XG4gICAgaWYoYXJyWzJdID09PSAwKSBjZWxsLmlubmVySFRNTCA9IGBgO1xuICAgIGVsc2UgY2VsbC5pbm5lckhUTUwgPSBhcnJbMl0udG9TdHJpbmcoKTtcbiAgICByZXR1cm4gYGdvb2Qgd29yayBtYXRlYDtcbiAgfVxuXG5cbmV4cG9ydHsgdW5kb1N0YWNrLCB1bmRvU3RlcCB9IiwiaW1wb3J0IHsgR3JpZCB9IGZyb20gXCIuLi8uLi9FbnRpdGllcy9HcmlkXCI7XG5cbmNvbnN0IGFwcGx5TmFrZWRTaW5nbGUgPSAoZ3JpZDogR3JpZCk6IEdyaWQgPT4ge1xuICAgIGdyaWQuZ2V0Q2VsbHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGNlbGwpIHtcbiAgICAgICAgaWYgKGNlbGwuZ2V0UG9zc2libGVWYWx1ZXMoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNlbGwuc2V0VmFsdWUoY2VsbC5nZXRQb3NzaWJsZVZhbHVlcygpWzBdKTtcbiAgICAgICAgICAgIGNlbGwuc2V0UG9zc2libGVWYWx1ZXMoW10pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGdyaWQ7XG59XG5cbmV4cG9ydCB7IGFwcGx5TmFrZWRTaW5nbGUgfSIsImltcG9ydCB7IEdyaWQgfSBmcm9tIFwiLi4vLi4vRW50aXRpZXMvR3JpZFwiO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gXCIuLi8uLi9FbnRpdGllcy9DZWxsXCI7XG5cbmNvbnN0IGFwcGx5SGlkZGVuU2luZ2xlID0gKGdyaWQ6IEdyaWQpOiBHcmlkID0+IHtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA5OyByb3crKykge1xuICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCA5OyBjb2x1bW4rKykge1xuICAgICAgICAgICAgLy8gZ2V0dGluZyBhIHJlZmVyZW5jZSBvZiB0aGUgY2VsbCBpbiB0aGUgZ3JpZCFcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBncmlkLmdldENlbGwocm93LCBjb2x1bW4pO1xuICAgICAgICAgICAgaWYgKCFjZWxsLmlzRW1wdHkoKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBoaWRkZW4gc2luZ2xlcyBpbiB0aGUgcm93XG4gICAgICAgICAgICBsZXQgaGlkZGVuU2luZ2xlRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBwb3NzaWJsZVZhbHVlc09mQ3VycmVudFJvdyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA5OyBjKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3dDZWxsID0gZ3JpZC5nZXRDZWxsKHJvdywgYyk7XG4gICAgICAgICAgICAgICAgaWYgKGMgIT09IGNvbHVtbiAmJiByb3dDZWxsLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICByb3dDZWxsLmdldFBvc3NpYmxlVmFsdWVzKCkuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcG9zc2libGVWYWx1ZXNPZkN1cnJlbnRSb3cuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGVWYWx1ZXNPZkN1cnJlbnRSb3cucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNlbGwuZ2V0UG9zc2libGVWYWx1ZXMoKS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcG9zc2libGVWYWx1ZXNPZkN1cnJlbnRSb3cuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0VmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnNldFBvc3NpYmxlVmFsdWVzKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuU2luZ2xlRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoaGlkZGVuU2luZ2xlRm91bmQpIHtcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsIGxvZ2ljIGVycm9yIGJ5IG1lOlxuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gUkVUVVJOIG5vdCBjb250aW51ZSEhXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyaWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBoaWRkZW4gc2luZ2xlcyBpbiB0aGUgY29sdW1uXG4gICAgICAgICAgICBoaWRkZW5TaW5nbGVGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHBvc3NpYmxlVmFsdWVzT2ZDdXJyZW50Q29sdW1uID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IDk7IHIrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbENlbGwgPSBncmlkLmdldENlbGwociwgY29sdW1uKTtcbiAgICAgICAgICAgICAgICBpZiAociAhPT0gcm93ICYmIGNvbENlbGwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbENlbGwuZ2V0UG9zc2libGVWYWx1ZXMoKS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3NzaWJsZVZhbHVlc09mQ3VycmVudENvbHVtbi5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVZhbHVlc09mQ3VycmVudENvbHVtbi5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VsbC5nZXRQb3NzaWJsZVZhbHVlcygpLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFwb3NzaWJsZVZhbHVlc09mQ3VycmVudENvbHVtbi5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0UG9zc2libGVWYWx1ZXMoW10pO1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5TaW5nbGVGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChoaWRkZW5TaW5nbGVGb3VuZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBncmlkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgaGlkZGVuIHNpbmdsZXMgaW4gdGhlIGJveFxuICAgICAgICAgICAgY29uc3Qgc3RhcnRSb3cgPSBNYXRoLmZsb29yKHJvdyAvIDMpICogMztcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0Q29sID0gTWF0aC5mbG9vcihjb2x1bW4gLyAzKSAqIDM7XG4gICAgICAgICAgICBsZXQgcG9zc2libGVWYWx1ZXNPZkN1cnJlbnRCb3ggPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSBzdGFydFJvdzsgciA8IHN0YXJ0Um93ICsgMzsgcisrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IHN0YXJ0Q29sOyBjIDwgc3RhcnRDb2wgKyAzOyBjKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3hDZWxsID0gZ3JpZC5nZXRDZWxsKHIsYyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHIgPT09IHJvdyAmJiBjID09PSBjb2x1bW4pICYmIGJveENlbGwuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3hDZWxsLmdldFBvc3NpYmxlVmFsdWVzKCkuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBvc3NpYmxlVmFsdWVzT2ZDdXJyZW50Qm94LmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVZhbHVlc09mQ3VycmVudEJveC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNlbGwuZ2V0UG9zc2libGVWYWx1ZXMoKS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcG9zc2libGVWYWx1ZXNPZkN1cnJlbnRCb3guaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuc2V0VmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnNldFBvc3NpYmxlVmFsdWVzKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuU2luZ2xlRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGhpZGRlblNpbmdsZUZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLT4gZ29pbmcgZm9yIHRoZSBuZXh0IENlbGwgaW4gdGhlIG5leHQgZm9yLWl0ZXJhdGlvblxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ3JpZDtcbn07XG5cbmV4cG9ydCB7IGFwcGx5SGlkZGVuU2luZ2xlIH0iLCJpbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4uLy4uL0VudGl0aWVzL0NlbGxcIjtcbmltcG9ydCB7IEdyaWQgfSBmcm9tIFwiLi4vLi4vRW50aXRpZXMvR3JpZFwiO1xuXG4vKipcbiAqIG5ha2VkIFNpbmdsZTogc2ltcGxlIFRlY2huaXF1ZTpcbiAqIGEgY2VsbCB3aXRoIGEgcG9zc2libGUgVmFsdWUgdGhhdCBpcyB0aGUgb25seSBvbmUgb2YgaXQncyBraW5kIGFuIGVudGlyZSByb3csIGNvbHVtbiBvciBib3hcbiAqIEBwYXJhbSBjZWxsIFxuICogQHBhcmFtIGdyaWQgXG4gKiBAcmV0dXJucyBwb3NzaWJsZVZhbHVlczogbnVtYmVyW10gYWNjb3JkaW5nIHRvIHRoZSBuYWtlZCBTaW5nbGUgdGFjdGljIFxuICovXG5jb25zdCBhcHBseVN1ZG9rdVJ1bGVzID0gKGdyaWQ6IEdyaWQpOiBHcmlkID0+IHtcbiAgICBjb25zdCBjZWxscyA9IGdyaWQuZ2V0Q2VsbHMoKTtcblxuICAgIGNlbGxzLmZvckVhY2goKGNlbGw6IENlbGwpID0+IHtcbiAgICAgICAgaWYoY2VsbC5nZXRWYWx1ZSgpICE9PSAwKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHJvdyA9IGNlbGwuZ2V0Um93KCk7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IGNlbGwuZ2V0Q29sdW1uKCk7XG4gICAgICAgIGNvbnN0IGJveCA9IGNlbGwuZ2V0Qm94KCk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlVmFsdWVzOiBudW1iZXJbXSA9IGNlbGwuZ2V0UG9zc2libGVWYWx1ZXMoKTtcblxuICAgICAgICAvLyBSZW1vdmUgdmFsdWVzIGFscmVhZHkgcHJlc2VudCBpbiB0aGUgc2FtZSByb3dcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA5OyBjKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ3JpZC5nZXRDZWxsKHJvdywgYykuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGlmIChjICE9PSBjb2x1bW4gJiYgdmFsdWUgIT09IG51bGwgJiYgcG9zc2libGVWYWx1ZXMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY2VsbC5yZW1vdmVQb3NzaWJsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB2YWx1ZXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBzYW1lIGNvbHVtblxuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IDk7IHIrKykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBncmlkLmdldENlbGwociwgY29sdW1uKS5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgaWYgKHIgIT09IHJvdyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBwb3NzaWJsZVZhbHVlcy5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnJlbW92ZVBvc3NpYmxlVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHZhbHVlcyBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIHNhbWUgYm94XG4gICAgICAgIGNvbnN0IGJveFJvdyA9IE1hdGguZmxvb3IoYm94IC8gMykgKiAzO1xuICAgICAgICBjb25zdCBib3hDb2x1bW4gPSAoYm94ICUgMykgKiAzO1xuICAgICAgICBmb3IgKGxldCByID0gYm94Um93OyByIDwgYm94Um93ICsgMzsgcisrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjID0gYm94Q29sdW1uOyBjIDwgYm94Q29sdW1uICsgMzsgYysrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBncmlkLmdldENlbGwociwgYykuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoKHIgIT09IHJvdyB8fCBjICE9PSBjb2x1bW4pICYmIHZhbHVlICE9PSBudWxsICYmIHBvc3NpYmxlVmFsdWVzLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnJlbW92ZVBvc3NpYmxlVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNlbGwuc2V0UG9zc2libGVWYWx1ZXMocG9zc2libGVWYWx1ZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGdyaWQ7XG59XG5cbmV4cG9ydCB7IGFwcGx5U3Vkb2t1UnVsZXMgfSIsImltcG9ydCB7IEdyaWQgfSBmcm9tIFwiLi4vRW50aXRpZXMvR3JpZFwiO1xuaW1wb3J0IHsgYXBwbHlIaWRkZW5TaW5nbGUgfSBmcm9tIFwiLi9yZWR1Y2VQb3NzaWJpbGl0aWVzL2hpZGRlblNpbmdsZVwiO1xuaW1wb3J0IHsgYXBwbHlTdWRva3VSdWxlcyB9IGZyb20gXCIuL3JlZHVjZVBvc3NpYmlsaXRpZXMvc3Vkb2t1UnVsZXNcIjtcbmltcG9ydCB7IGFwcGx5UG9pbnRpbmdQYWlycyB9IGZyb20gXCIuL3JlZHVjZVBvc3NpYmlsaXRpZXMvcG9pbnRpbmdQYWlyXCI7XG5pbXBvcnQgeyBhcHBseU5ha2VkU2luZ2xlIH0gZnJvbSBcIi4vZmluZE51bWJlcnMvbmFrZWRTaW5nbGVcIjtcblxuXG5cbi8qKlxuICogU29sdmUgdGhlIFN1ZG9rdSBncmlkIHVzaW5nIHZhcmlvdXMgc29sdmluZyB0ZWNobmlxdWVzLlxuICogQHBhcmFtIGdyaWQgVGhlIFN1ZG9rdSBncmlkIHRvIHNvbHZlXG4gKiBAcmV0dXJucyBUaGUgc29sdmVkIFN1ZG9rdSBncmlkXG4gKi9cbmNvbnN0IHNvbHZlU3Vkb2t1ID0gKGdyaWQ6IEdyaWQpOiBHcmlkID0+IHtcbiAgICBjb25zb2xlLmxvZyhgaW5zaWRlICdzb2x2ZVN1ZG9rdScgbWV0aG9kLmApO1xuICAgIGxldCBoYXNNYWRlQ2hhbmdlcyA9IGZhbHNlO1xuICAgIGNvbnN0IG1heEl0ZXJhdGlvbnMgPSAxMDtcbiAgICBsZXQgaXRlcmF0aW9uID0gMDtcblxuICAgIGRvIHtcbiAgICAgICAgaGFzTWFkZUNoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgbGV0IG9sZEdyaWQ7XG5cbiAgICAgICAgLy8gYXBwbHkgU3Vkb2t1IHJ1bGVzXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGhhc01hZGVDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgICBvbGRHcmlkID0gZ3JpZC5jb3B5KCk7XG4gICAgICAgICAgICAvLyBFeGVjdXRlIHN1ZG9rdVJ1bGVzIHRvIHJlZHVjZSBwb3NzaWJpbGl0aWVzXG4gICAgICAgICAgICBncmlkID0gYXBwbHlTdWRva3VSdWxlcyhncmlkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCFncmlkLmVxdWFscyhvbGRHcmlkKSk7XG4gICAgICAgICAgICBpZiAoIWdyaWQuZXF1YWxzKG9sZEdyaWQpKSB7XG4gICAgICAgICAgICAgICAgaGFzTWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgbmFrZWQgc2luZ2xlc1xuICAgICAgICAgICAgb2xkR3JpZCA9IGdyaWQuY29weSgpO1xuICAgICAgICAgICAgZ3JpZCA9IGFwcGx5TmFrZWRTaW5nbGUoZ3JpZCk7XG4gICAgICAgICAgICBpZiAoIWdyaWQuZXF1YWxzKG9sZEdyaWQpKSB7XG4gICAgICAgICAgICAgICAgaGFzTWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICghZ3JpZC5pc0Z1bGwoKSAmJiBoYXNNYWRlQ2hhbmdlcyk7XG5cbiAgICAgICAgLy8gYXBwbHkgaGlkZGVuIHNpbmxlcyB0ZWNobmlxdWVcbiAgICAgICAgICAgIG9sZEdyaWQgPSBncmlkLmNvcHkoKTtcbiAgICAgICAgICAgIC8vIGV4ZWN1dGUgaGlkZGVuU2luZ2xlIEFsZ29yaXRobVxuICAgICAgICAgICAgZ3JpZCA9IGFwcGx5SGlkZGVuU2luZ2xlKGdyaWQpO1xuICAgICAgICAgICAgaWYgKCFncmlkLmVxdWFscyhvbGRHcmlkKSkge1xuICAgICAgICAgICAgICAgIGhhc01hZGVDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9sZEdyaWQgPSBncmlkLmNvcHkoKTtcblxuICAgICAgICAvLyBjb2RlIGZvciBwb2ludGluZyBwYWlycyBub3QgdGVzdGVkIHlldCFcbiAgICAgICAgLy8gYmVmb3JlIHBvaW50aW5nIHBhaXJzIGFkZCBoaWRkZW4gcGFpcnMsIGJlY2F1c2UgbW9yZSBlZmZlY3RpdmUhISFcbiAgICAgICAgLy8gQXBwbHkgcG9pbnRpbmcgcGFpcnMgdGVjaG5pcXVlXG4gICAgICAgIC8vIG9sZEdyaWQgPSBuZXcgR3JpZChncmlkLnRvTnVtYmVyQXJyYXkoKSk7XG4gICAgICAgIC8vIGdyaWQgPSBhcHBseVBvaW50aW5nUGFpcnMoZ3JpZCk7XG4gICAgICAgIC8vIGlmIChncmlkICE9PSB1cGRhdGVkR3JpZCkge1xuICAgICAgICAvLyAgICAgb2xkR3JpZCA9IGdyaWQ7XG4gICAgICAgIC8vICAgICBoYXNNYWRlQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBpdGVyYXRpb24rKztcbiAgICB9IHdoaWxlICghZ3JpZC5pc0Z1bGwoKSAmJiBoYXNNYWRlQ2hhbmdlcyAmJiBpdGVyYXRpb24gPD0gbWF4SXRlcmF0aW9ucyk7XG5cbiAgICByZXR1cm4gZ3JpZDtcbn1cblxuZXhwb3J0IHsgc29sdmVTdWRva3UgfVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IGNoZWNrR3JpZCB9IGZyb20gXCIuL2J1dHRvbi9jaGVja2luZ0dyaWRcIjtcbmltcG9ydCB7IGNyZWF0ZUJvYXJkIH0gZnJvbSBcIi4vTWFuYWdpbmdHcmlkL2NyZWF0ZVwiO1xuaW1wb3J0IHsgY2xlYXJCb2FyZCB9IGZyb20gXCIuL2J1dHRvbi9jbGVhclwiO1xuaW1wb3J0IHsgdW5kb1N0ZXAgfSBmcm9tIFwiLi9idXR0b24vdW5kb1wiO1xuaW1wb3J0ICogYXMgUmFuZG9tR3JpZCBmcm9tIFwiLi9SZXBvc2l0b3J5L2dldHRpbmdSYW5kb21HcmlkXCI7XG5pbXBvcnQgKiBhcyBSZXBvIGZyb20gXCIuL1JlcG9zaXRvcnkvVGVzdGluZ0dyaWRzL3N1ZG9rdVRlc3RHcmlkXCI7XG5pbXBvcnQgKiBhcyBUZXN0R3JpZHMgZnJvbSBcIi4vUmVwb3NpdG9yeS9UZXN0aW5nR3JpZHMvdGVzdFNvbHZpbmdcIjtcbmltcG9ydCB7IHNvbHZlR3JpZCB9IGZyb20gXCIuL2J1dHRvbi9zb2x2ZVwiO1xuLy8gaW1wb3J0IHsgZ2V0Q3VycmVudEdyaWQgfSBmcm9tIFwiLi9HZXR0ZXIvZ2V0R3JpZFwiO1xuXG4vLyBkZWJ1Z2dlcjsgXG4vLyBsaW50OyB6b2Q7IHByZXR0aWVyIGxpYnMgXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1idXR0b25zLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5jb25zdCBjbGVhckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBjbGVhcmApO1xuaWYoY2xlYXJCdXR0b24gIT09IG51bGwpIGNsZWFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgY2xlYXJCb2FyZCk7XG5lbHNlIGFsZXJ0KGB3ZSd2ZSBnb3QgYSBwcm9ibGVtIHdpdGggdGhlIGNoZWNrIGJ1dHRvbiA6L2ApO1xuXG5jb25zdCBjaGVja2VyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGVja1wiKTtcbmlmKGNoZWNrZXJCdXR0b24gIT09IG51bGwpIGNoZWNrZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoZWNrR3JpZCk7XG5lbHNlIGFsZXJ0KGB3ZSd2ZSBnb3QgYSBwcm9ibGVtIHdpdGggdGhlIGNoZWNrIGJ1dHRvbmApO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJ6XCIgJiYgZS5jdHJsS2V5ID09PSB0cnVlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gRXhlY3V0ZSBVbmRvIGZ1bmN0aW9uIHdoZW4gc3RyZyt1IGlzIHByZXNzZWRcbiAgICAgICAgdW5kb1N0ZXAoKTtcbiAgICB9XG59KTtcblxuY29uc3QgdW5kb0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB1bmRvYCk7XG5pZih1bmRvQnV0dG9uICE9PSBudWxsKSB7XG4gICAgdW5kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdW5kb1N0ZXApOyAgICAgXG59IGVsc2UgYWxlcnQoYHdlJ3ZlIGdvdCBhIHByb2JsZW0gd2l0aCB0aGUgdW5kbyBidXR0b25gKTtcblxuY29uc3Qgc29sdmVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29sdmUnKTtcbmlmKHNvbHZlQnV0dG9uICE9PSBudWxsIHx8IHNvbHZlQnV0dG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBzb2x2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNvbHZlR3JpZCk7XG59IGVsc2UgYWxlcnQoYHdlJ3ZlIGdvdCBhIHByb2JsZW0gd2l0aCB0aGUgdW5kbyBidXR0b25gKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZXhlY3V0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIGNyZWF0ZUJvYXJkKFJhbmRvbUdyaWQuZ2V0UmFuZG9tSGFyZEdyaWQoKSk7XG4vLyBjcmVhdGVCb2FyZChSYW5kb21HcmlkLmdldFJhbmRvbU1lZGl1bUdyaWQoKSk7XG4vLyBjcmVhdGVCb2FyZChSYW5kb21HcmlkLmdldFJhbmRvbUVhc3lHcmlkKCkpO1xuY3JlYXRlQm9hcmQoUmFuZG9tR3JpZC5nZXRSYW5kb21IYXJkR3JpZCgpKTtcbiJdLCJuYW1lcyI6WyJDZWxsIiwiY29uc3RydWN0b3IiLCJyb3ciLCJjb2x1bW4iLCJwb3NzaWJsZXNWYWx1ZXMiLCJ2YWx1ZSIsInRoaXMiLCJib3giLCJNYXRoIiwiZmxvb3IiLCJwb3NzaWJsZVZhbHVlcyIsImdldFJvdyIsImdldENvbHVtbiIsImdldEJveCIsImdldFBvc3NpYmxlVmFsdWVzIiwiZ2V0VmFsdWUiLCJzZXRWYWx1ZSIsInNldFBvc3NpYmxlVmFsdWVzIiwiY2xvbmUiLCJjb3B5IiwiY29waWVkQ2VsbCIsInJlbW92ZVBvc3NpYmxlVmFsdWUiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJpc0VtcHR5IiwiZXF1YWxzIiwib3RoZXJDZWxsIiwiYXJyMSIsImFycjIiLCJsZW5ndGgiLCJpIiwiYXJyYXlzRXF1YWwiLCJHcmlkIiwiZ3JpZERhdGEiLCJjZWxscyIsIm90aGVyQ2VsbHMiLCJwdXNoIiwiY29sIiwiY2VsbCIsImNvcGllZEdyaWREYXRhIiwidG9OdW1iZXJBcnJheSIsIm90aGVyR3JpZCIsInRoaXNDZWxscyIsImdldENlbGxzIiwiZ2V0Q2VsbCIsInJvd0luZGV4IiwiY29sdW1uSW5kZXgiLCJyIiwiYyIsIm51bUFycmF5Iiwicm93RGF0YSIsImlzRnVsbCIsImV2ZXJ5IiwiZ2V0Q3VycmVudEdyaWQiLCJncmlkIiwiQXJyYXkiLCJmaWxsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaiIsInRlbXAiLCJIVE1MRWxlbWVudCIsInRlbXBOdW0iLCJpbm5lclRleHQiLCJOdW1iZXIiLCJjcmVhdGVCb2FyZCIsIndpdGhHcmlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwiZWxlbSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmQiLCJjb2xJbmRleCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGROdW1iZXIiLCJ0b1N0cmluZyIsImV2ZW50IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwicXVlcnlTZWxlY3RvciIsIm51bSIsInByb210IiwicHJvbXB0IiwicGFyc2VJbnQiLCJpc05hTiIsIm51bWJlckJlZm9yZUNoYW5nZSIsImlubmVySFRNTCIsInVuZG9TdGFjayIsIm51bU9mRWFzeUdyaWRzIiwiZWFzeUdyaWQxIiwiZWFzeUdyaWQyIiwibnVtT2ZIYXJkcmlkcyIsImhhcmRHcmlkMSIsImhhcmRHcmlkMiIsIm51bU9mTWVkaXVtR3JpZHMiLCJtZWRpdW1HcmlkMSIsIm1lZGl1bUdyaWQyIiwiZ2V0UmFuZG9tRWFzeUdyaWQiLCJyYW5kTnVtIiwicmFuZG9tIiwiRWFzeUdyaWRzIiwiZ2V0UmFuZG9tTWVkaXVtR3JpZCIsIk1lZGl1bUdyaWRzIiwiZ2V0UmFuZG9tSGFyZEdyaWQiLCJIYXJkR3JpZHMiLCJjaGVja0dyaWQiLCJvdXRwdXQiLCJnIiwiYWxlcnQiLCJncmlkSXNGdWxsIiwiY2hlY2tSb3dzQW5kQ29sdW1ucyIsImNoZWNrQm94ZXMiLCJjdXJyZW50R3JpZCIsImNvdW50ZXJSb3dzIiwiY291bnRlckNvbHVtbnMiLCJudW1Sb3ciLCJudW1Db2wiLCJib3hDaGVja0hlbHBlciIsImZyb21Sb3ciLCJ0b1JvdyIsImZyb21Db2x1bW4iLCJ0b0NvbHVtbiIsImNvdW50ZXIiLCJkZWxldGVCb2FyZCIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiY2xlYXJCb2FyZCIsImNyZWF0ZVZvaWRHcmlkIiwic29sdmVHcmlkIiwiY29uc29sZSIsImxvZyIsInJlc3VsdGluZ0dyaWRUb051bUFyciIsInNvbHZlU3Vkb2t1IiwiQ29sbGVjdGlvbiIsInN0b3JhZ2UiLCJzaXplIiwiY2FwYWNpdHkiLCJJbmZpbml0eSIsInN1cGVyIiwiaXRlbSIsIkVycm9yIiwicG9wIiwicGVlayIsInVuZG9TdGVwIiwidW5kZWZpbmVkIiwic3RyIiwiYXJyIiwiYXBwbHlOYWtlZFNpbmdsZSIsImFwcGx5SGlkZGVuU2luZ2xlIiwiaGlkZGVuU2luZ2xlRm91bmQiLCJwb3NzaWJsZVZhbHVlc09mQ3VycmVudFJvdyIsInJvd0NlbGwiLCJpbmNsdWRlcyIsInBvc3NpYmxlVmFsdWVzT2ZDdXJyZW50Q29sdW1uIiwiY29sQ2VsbCIsInN0YXJ0Um93Iiwic3RhcnRDb2wiLCJwb3NzaWJsZVZhbHVlc09mQ3VycmVudEJveCIsImJveENlbGwiLCJhcHBseVN1ZG9rdVJ1bGVzIiwiYm94Um93IiwiYm94Q29sdW1uIiwiaGFzTWFkZUNoYW5nZXMiLCJpdGVyYXRpb24iLCJvbGRHcmlkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjbGVhckJ1dHRvbiIsImNoZWNrZXJCdXR0b24iLCJ3aW5kb3ciLCJlIiwia2V5IiwiY3RybEtleSIsInByZXZlbnREZWZhdWx0IiwidW5kb0J1dHRvbiIsInNvbHZlQnV0dG9uIiwiUmFuZG9tR3JpZCJdLCJzb3VyY2VSb290IjoiIn0=